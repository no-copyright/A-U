/* ==========================================================
   CODEBASE SNAPSHOT - 2025-07-19 09:15:13
   Project: resources
   Files: 42 (42 text, 0 binary)
   Ignored Items: 2
   ========================================================== */

/* PROJECT STRUCTURE
   ------------------------------------------------------------
   .
   └── views/
       ├── components/
       │   ├── inputs/
       │   │   ├── date.blade.php
       │   │   ├── editor-array.blade.php
       │   │   ├── editor.blade.php
       │   │   ├── email.blade.php
       │   │   ├── image-link-array.blade.php
       │   │   ├── image-link.blade.php
       │   │   ├── number.blade.php
       │   │   ├── select-multiple.blade.php
       │   │   ├── select-simple.blade.php
       │   │   ├── select.blade.php
       │   │   ├── text-area-array.blade.php
       │   │   ├── text-area.blade.php
       │   │   ├── text-array.blade.php
       │   │   ├── text.blade.php
       │   │   └── time.blade.php
       │   └── menus/
       │       ├── menu-bar.blade.php
       │       └── menu-item.blade.php
       ├── kingexpressbus/
       │   ├── admin/
       │   │   ├── components/
       │   │   │   ├── light-dark-mode.blade.php
       │   │   │   ├── menu.blade.php
       │   │   │   ├── navbar.blade.php
       │   │   │   ├── scripts.blade.php
       │   │   │   ├── sidebar.blade.php
       │   │   │   ├── sidenav-theme-mode.blade.php
       │   │   │   ├── styles.blade.php
       │   │   │   └── topnav.blade.php
       │   │   ├── layouts/
       │   │   │   └── main.blade.php
       │   │   ├── modules/
       │   │   │   ├── categories/
       │   │   │   │   ├── createOrEdit.blade.php
       │   │   │   │   └── index.blade.php
       │   │   │   ├── customers/
       │   │   │   │   ├── index.blade.php
       │   │   │   │   └── show.blade.php
       │   │   │   ├── dashboard/
       │   │   │   │   ├── edit.blade.php
       │   │   │   │   └── index.blade.php
       │   │   │   ├── news/
       │   │   │   │   ├── createOrEdit.blade.php
       │   │   │   │   └── index.blade.php
       │   │   │   ├── teachers/
       │   │   │   │   ├── createOrEdit.blade.php
       │   │   │   │   └── index.blade.php
       │   │   │   └── training/
       │   │   │       ├── createOrEdit.blade.php
       │   │   │       └── index.blade.php
       │   │   └── partials/
       │   │       └── alerts.blade.php
       │   ├── auth/
       │   │   └── login.blade.php
       │   └── mail/
       │       ├── admin_new_customer_notification.blade.php
       │       └── customer_registration_success.blade.php
       └── vendor/
           └── ckfinder/
   ------------------------------------------------------------ */

/* ===== views\components\inputs\date.blade.php ===== */
<div class="form-group">
    <label for="input-{{$name}}">{{$label}}</label>
    <input type="date" id="input-{{$name}}" name="{{$name}}" class="form-control" required
        value="{{ $value ?: old($name) }}"
        onfocus="this.showPicker()">
    @error($name)
    <div class="text-danger">{{ $message }}</div>
    @enderror
</div>

@if($value=="" && old($name) == "")
@push('scripts')
<script>
    document.getElementById('input-{{$name}}').value = (new Date()).toISOString().substring(0, 10)
</script>
@endpush
@endif

/* ===== views\components\inputs\editor-array.blade.php ===== */
<div class="card">
    <div class="card-header">
        <h3 class="card-title">{{ $label }}</h3>
    </div>
    <div class="card-body">
        <div class="form-group">
            {{-- <label for="input-{{ $name }}">{{ $label }}</label> --}}
            <div class="input-group">
                <button type="button" class="btn btn-secondary btn-add-editor-{{ $name }}">Thêm</button>
            </div>
        </div>

        <div id="editor-container-{{ $name }}" class="mt-2">
            <ul class="list-group" id="list-{{$name}}">
                @if (is_array($value) && count($value) > 0)
                    @foreach ($value as $index => $item)
                        <li class="list-group-item d-flex align-items-start flex-column">
                            <textarea name="{{ $name }}[]" id="editor-{{ $name }}-{{ $index }}"
                                      class="form-control ckeditor-textarea">{!! $item !!}</textarea>
                            <div class="mt-2 d-flex justify-content-end w-100">
                                <button type="button" class="btn btn-danger btn-sm btn-remove-editor-{{$name}}"
                                        data-index="{{ $index }}">Xoá
                                </button>
                            </div>
                        </li>
                    @endforeach
                @endif
            </ul>
        </div>

        @error($name)
        <div class="text-danger">{{ $message }}</div>
        @enderror
    </div>
</div>

@push("scripts")
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let editorContainer_{{$name}} = document.getElementById("editor-container-{{$name}}");
            let list_{{$name}} = document.getElementById("list-{{$name}}");
            let buttonAdd_{{$name}} = document.querySelector(".btn-add-editor-{{$name}}");
            let editorCount = {{ is_array($value) ? count($value) : 0 }};
            let ckeditorInstances = {};


            buttonAdd_{{$name}}.addEventListener('click', function () {
                let li = document.createElement('li');
                li.classList.add('list-group-item', 'd-flex', 'align-items-start', 'flex-column');
                let editorId = `editor-{{ $name }}-${editorCount}`;
                li.innerHTML = `<textarea name="{{ $name }}[]" id="${editorId}" class="form-control ckeditor-textarea"></textarea>
                                  <div class="mt-2 d-flex justify-content-end w-100">
                                        <button type="button" class="btn btn-danger btn-sm btn-remove-editor-{{$name}}" data-index="${editorCount}">Xoá</button>
                                    </div>`;
                list_{{$name}}.appendChild(li);
                initCkEditor(editorId);
                addRemoveEvent(li.querySelector('.btn-remove-editor-{{$name}}'));
                editorCount++;
            });


            function initCkEditor(editorId) {
                if (ckeditorInstances[editorId]) {
                    return; // Skip if CKEditor instance already exists
                }

                CKEDITOR.ClassicEditor.create(document.getElementById(editorId), {
                    toolbar: {
                        items: [
                            'findAndReplace', 'selectAll',
                            '|',
                            'heading',
                            '|',
                            'bold', 'italic', 'strikethrough', 'underline', 'subscript', 'superscript',
                            'bulletedList', 'numberedList', 'todoList',
                            '|',
                            'outdent', 'indent', '|',
                            'undo', 'redo',
                            '-',
                            'fontSize', 'fontFamily', 'fontColor', 'fontBackgroundColor', 'highlight',
                            '|',
                            'alignment',
                            '|',
                            'link', 'insertImage', "CKFinder", 'blockQuote', 'insertTable', 'mediaEmbed',
                            'htmlEmbed',
                            '|',
                            'specialCharacters', 'horizontalLine', 'pageBreak', '|',
                            'sourceEditing'
                        ],
                        shouldNotGroupWhenFull: true
                    },
                    list: {
                        properties: {
                            styles: true,
                            startIndex: true,
                            reversed: true
                        }
                    },
                    ckfinder: {
                        openerMethod: 'popup',
                        options: {
                            resourceType: 'Images'
                        }
                    },
                    heading: {
                        options: [{
                            model: 'paragraph',
                            view: 'p',
                            title: 'Paragraph',
                            class: 'ck-heading_paragraph'
                        },
                            {
                                model: 'heading1',
                                view: 'h1',
                                title: 'Heading 1',
                                class: 'ck-heading_heading1'
                            },
                            {
                                model: 'heading2',
                                view: 'h2',
                                title: 'Heading 2',
                                class: 'ck-heading_heading2'
                            },
                            {
                                model: 'heading3',
                                view: 'h3',
                                title: 'Heading 3',
                                class: 'ck-heading_heading3'
                            },
                            {
                                model: 'heading4',
                                view: 'h4',
                                title: 'Heading 4',
                                class: 'ck-heading_heading4'
                            },
                            {
                                model: 'heading5',
                                view: 'h5',
                                title: 'Heading 5',
                                class: 'ck-heading_heading5'
                            },
                            {
                                model: 'heading6',
                                view: 'h6',
                                title: 'Heading 6',
                                class: 'ck-heading_heading6'
                            }
                        ]
                    },
                    placeholder: 'Content...',
                    fontFamily: {
                        options: [
                            'default',
                            'Arial, Helvetica, sans-serif',
                            'Courier New, Courier, monospace',
                            'Georgia, serif',
                            'Lucida Sans Unicode, Lucida Grande, sans-serif',
                            'Tahoma, Geneva, sans-serif',
                            'Times New Roman, Times, serif',
                            'Trebuchet MS, Helvetica, sans-serif',
                            'Verdana, Geneva, sans-serif'
                        ],
                        supportAllValues: true
                    },
                    fontSize: {
                        options: [10, 12, 14, 'default', 18, 20, 22],
                        supportAllValues: true
                    },
                    htmlSupport: {
                        allow: [{
                            name: /.*/,
                            attributes: true,
                            classes: true,
                            styles: true
                        }]
                    },
                    htmlEmbed: {
                        showPreviews: true
                    },
                    link: {
                        decorators: {
                            addTargetToExternalLinks: true,
                            defaultProtocol: 'https://',
                            toggleDownloadable: {
                                mode: 'manual',
                                label: 'Downloadable',
                                attributes: {
                                    download: 'file'
                                }
                            }
                        }
                    },
                    mention: {
                        feeds: [{
                            marker: '@',
                            feed: [
                                '@apple', '@bears', '@brownie', '@cake', '@cake', '@candy', '@canes',
                                '@chocolate', '@cookie', '@cotton', '@cream',
                                '@cupcake', '@danish', '@donut', '@dragée', '@fruitcake', '@gingerbread',
                                '@gummi', '@ice', '@jelly-o',
                                '@liquorice', '@macaroon', '@marzipan', '@oat', '@pie', '@plum', '@pudding',
                                '@sesame', '@snaps', '@soufflé',
                                '@sugar', '@sweet', '@topping', '@wafer'
                            ],
                            minimumCharacters: 1
                        }]
                    },
                    removePlugins: [
                        'EasyImage',
                        'RealTimeCollaborativeComments',
                        'RealTimeCollaborativeTrackChanges',
                        'RealTimeCollaborativeRevisionHistory',
                        'PresenceList',
                        'Comments',
                        'TrackChanges',
                        'TrackChangesData',
                        'RevisionHistory',
                        'Pagination',
                        'WProofreader',
                        'MathType'
                    ]
                }).then(editor => {
                    ckeditorInstances[editorId] = editor;
                })
            }


            function addRemoveEvent(removeButton) {
                removeButton.addEventListener('click', function () {
                    let li = removeButton.closest('li');
                    let textarea = li.querySelector('.ckeditor-textarea');
                    let editorId = textarea.id;
                    if (ckeditorInstances[editorId]) {
                        ckeditorInstances[editorId].destroy();
                        delete ckeditorInstances[editorId];
                    }
                    li.remove();
                });
            }

            //Khởi tạo ckeditor có sẵn
            list_{{$name}}.querySelectorAll('.ckeditor-textarea').forEach((textarea, index) => {
                initCkEditor(textarea.id)
            })
            list_{{$name}}.querySelectorAll('.btn-remove-editor-{{$name}}').forEach(button => {
                addRemoveEvent(button)
            });

        });
    </script>
@endpush


/* ===== views\components\inputs\editor.blade.php ===== */
<div class="form-group">
    <label for="input-{{$name}}">{{$label}}</label>
    <textarea name="{{$name}}" id="input-{{$name}}">{!! $value ?: old($name) !!}</textarea>
    @error($name)
    <div class="text-danger">{{ $message }}</div>
    @enderror
</div>

@push("scripts")
    <script>
        CKEDITOR.ClassicEditor.create(document.getElementById("input-{{$name}}"), {
            // https://ckeditor.com/docs/ckeditor5/latest/features/toolbar/toolbar.html#extended-toolbar-configuration-format
            toolbar: {
                items: [
                    'findAndReplace', 'selectAll',
                    '|',
                    'heading',
                    '|',
                    'bold', 'italic', 'strikethrough', 'underline', 'subscript', 'superscript',
                    'bulletedList', 'numberedList', 'todoList',
                    '|',
                    'outdent', 'indent', '|',
                    'undo', 'redo',
                    '-',
                    'fontSize', 'fontFamily', 'fontColor', 'fontBackgroundColor', 'highlight',
                    '|',
                    'alignment',
                    '|',
                    'link', 'insertImage', "CKFinder", 'blockQuote', 'insertTable', 'mediaEmbed',
                    'htmlEmbed',
                    '|',
                    'specialCharacters', 'horizontalLine', 'pageBreak', '|',
                    'sourceEditing'
                ],
                shouldNotGroupWhenFull: true
            },
            // Changing the language of the interface requires loading the language file using the <script> tag.
            // language: 'es',
            list: {
                properties: {
                    styles: true,
                    startIndex: true,
                    reversed: true
                }
            },
            ckfinder: {
                // Sử dụng route bạn đã định nghĩa trong Laravel
                openerMethod: 'popup',
                // uploadUrl: "{{ route('ckfinder_connector') }}",
                options: {
                    resourceType: 'Images'
                }
            },
            heading: {
                options: [{
                    model: 'paragraph',
                    view: 'p',
                    title: 'Paragraph',
                    class: 'ck-heading_paragraph'
                },
                    {
                        model: 'heading1',
                        view: 'h1',
                        title: 'Heading 1',
                        class: 'ck-heading_heading1'
                    },
                    {
                        model: 'heading2',
                        view: 'h2',
                        title: 'Heading 2',
                        class: 'ck-heading_heading2'
                    },
                    {
                        model: 'heading3',
                        view: 'h3',
                        title: 'Heading 3',
                        class: 'ck-heading_heading3'
                    },
                    {
                        model: 'heading4',
                        view: 'h4',
                        title: 'Heading 4',
                        class: 'ck-heading_heading4'
                    },
                    {
                        model: 'heading5',
                        view: 'h5',
                        title: 'Heading 5',
                        class: 'ck-heading_heading5'
                    },
                    {
                        model: 'heading6',
                        view: 'h6',
                        title: 'Heading 6',
                        class: 'ck-heading_heading6'
                    }
                ]
            },
            // https://ckeditor.com/docs/ckeditor5/latest/features/editor-placeholder.html#using-the-editor-configuration
            placeholder: 'Content...',
            // https://ckeditor.com/docs/ckeditor5/latest/features/font.html#configuring-the-font-family-feature
            fontFamily: {
                options: [
                    'default',
                    'Arial, Helvetica, sans-serif',
                    'Courier New, Courier, monospace',
                    'Georgia, serif',
                    'Lucida Sans Unicode, Lucida Grande, sans-serif',
                    'Tahoma, Geneva, sans-serif',
                    'Times New Roman, Times, serif',
                    'Trebuchet MS, Helvetica, sans-serif',
                    'Verdana, Geneva, sans-serif'
                ],
                supportAllValues: true
            },
            // https://ckeditor.com/docs/ckeditor5/latest/features/font.html#configuring-the-font-size-feature
            fontSize: {
                options: [10, 12, 14, 'default', 18, 20, 22],
                supportAllValues: true
            },
            // Be careful with the setting below. It instructs CKEditor to accept ALL HTML markup.
            // https://ckeditor.com/docs/ckeditor5/latest/features/general-html-support.html#enabling-all-html-features
            htmlSupport: {
                allow: [{
                    name: /.*/,
                    attributes: true,
                    classes: true,
                    styles: true
                }]
            },
            // Be careful with enabling previews
            // https://ckeditor.com/docs/ckeditor5/latest/features/html-embed.html#content-previews
            htmlEmbed: {
                showPreviews: true
            },
            // https://ckeditor.com/docs/ckeditor5/latest/features/link.html#custom-link-attributes-decorators
            link: {
                decorators: {
                    addTargetToExternalLinks: true,
                    defaultProtocol: 'https://',
                    toggleDownloadable: {
                        mode: 'manual',
                        label: 'Downloadable',
                        attributes: {
                            download: 'file'
                        }
                    }
                }
            },
            // https://ckeditor.com/docs/ckeditor5/latest/features/mentions.html#configuration
            mention: {
                feeds: [{
                    marker: '@',
                    feed: [
                        '@apple', '@bears', '@brownie', '@cake', '@cake', '@candy', '@canes',
                        '@chocolate', '@cookie', '@cotton', '@cream',
                        '@cupcake', '@danish', '@donut', '@dragée', '@fruitcake', '@gingerbread',
                        '@gummi', '@ice', '@jelly-o',
                        '@liquorice', '@macaroon', '@marzipan', '@oat', '@pie', '@plum', '@pudding',
                        '@sesame', '@snaps', '@soufflé',
                        '@sugar', '@sweet', '@topping', '@wafer'
                    ],
                    minimumCharacters: 1
                }]
            },
            // The "super-build" contains more premium features that require additional configuration, disable them below.
            // Do not turn them on unless you read the documentation and know how to configure them and setup the editor.
            removePlugins: [
                // These two are commercial, but you can try them out without registering to a trial.
                // 'ExportPdf',
                // 'ExportWord',
                // 'CKBox',
                // 'CKFinder',
                'EasyImage',
                // This sample uses the Base64UploadAdapter to handle image uploads as it requires no configuration.
                // https://ckeditor.com/docs/ckeditor5/latest/features/images/image-upload/base64-upload-adapter.html
                // Storing images as Base64 is usually a very bad idea.
                // Replace it on production website with other solutions:
                // https://ckeditor.com/docs/ckeditor5/latest/features/images/image-upload/image-upload.html
                // 'Base64UploadAdapter',
                'RealTimeCollaborativeComments',
                'RealTimeCollaborativeTrackChanges',
                'RealTimeCollaborativeRevisionHistory',
                'PresenceList',
                'Comments',
                'TrackChanges',
                'TrackChangesData',
                'RevisionHistory',
                'Pagination',
                'WProofreader',
                // Careful, with the Mathtype plugin CKEditor will not load when loading this sample
                // from a local file system (file://) - load this site via HTTP server if you enable MathType
                'MathType'
            ]
        });
    </script>
@endpush


/* ===== views\components\inputs\email.blade.php ===== */
<div class="form-group">
    <label for="input-{{$name}}">{{$label}}</label>
    <input type="email" class="form-control" id="input-{{$name}}" name="{{$name}}"
           value="{{$value ?: old($name)}}" placeholder="Enter {{$label}}" required>
    @error($name)
    <div class="text-danger">{{ $message }}</div>
    @enderror
</div>


/* ===== views\components\inputs\image-link-array.blade.php ===== */
<div class="card">
    <div class="card-header">
        <h3 class="card-title">{{$label}}</h3>
    </div>
    <div class="card-body">
        <div class="form-group">
            <label>Thêm ảnh mới</label>
            <div class="input-group">
                <input readonly type="text" class="form-control" placeholder="Chọn ảnh từ trình duyệt...">
                <span class="input-group-append">
                    {{-- Sửa lỗi: Đổi ID thành class để tránh trùng lặp. Truyền $name vào để định danh. --}}
                    <button type="button" class="btn btn-secondary ckfinder-popup-for-array" data-name="{{ $name }}">
                        Duyệt Ảnh
                    </button>
                </span>
            </div>
        </div>

        <div class="mt-2 image-preview-grid">
            {{-- Dùng một id duy nhất cho list --}}
            <ul class="list-unstyled d-flex flex-wrap" id="list-{{ $name }}">
                @if (is_array($value) && count($value) > 0)
                    @foreach ($value as $item)
                        <li class="grid-item">
                            <img src="{{ $item }}" alt="Image Preview">
                            <input type="hidden" name="{{ $name }}[]" value="{{ $item }}">
                            <button type="button" class="btn btn-danger btn-sm btn-remove-image">
                                <i class="fas fa-times"></i>
                            </button>
                        </li>
                    @endforeach
                @endif
            </ul>
        </div>

        @error($name)
        <div class="text-danger">{{ $message }}</div>
        @enderror
    </div>
</div>

{{-- Script này chỉ chạy một lần và xử lý tất cả các component có trên trang --}}
@pushonce('scripts')
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Dùng event delegation cho tất cả các nút 'Duyệt Ảnh' loại array
            document.body.addEventListener('click', function(e) {
                if (e.target && e.target.matches('.ckfinder-popup-for-array')) {
                    const button = e.target;
                    const name = button.dataset.name;
                    const list = document.getElementById(`list-${name}`);

                    if (!list) return;

                    CKFinder.popup({
                        chooseFiles: true,
                        multiple: true, // Cho phép chọn nhiều file
                        onInit: function (finder) {
                            finder.on('files:choose', function (evt) {
                                const files = evt.data.files;
                                files.forEach(function(file) {
                                    const path = new URL(file.getUrl()).pathname;
                                    const li = document.createElement('li');
                                    li.className = 'grid-item';
                                    li.innerHTML = `
                                        <img src="${path}" alt="Image Preview">
                                        <input type="hidden" name="${name}[]" value="${path}">
                                        <button type="button" class="btn btn-danger btn-sm btn-remove-image">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    `;
                                    list.appendChild(li);
                                });
                            });
                        }
                    });
                }
            });

            // Dùng event delegation cho tất cả các nút xóa ảnh
            document.body.addEventListener('click', function(e) {
                const removeButton = e.target.closest('.btn-remove-image');
                if (removeButton && removeButton.closest('.grid-item')) {
                    removeButton.closest('.grid-item').remove();
                }
            });
        });
    </script>
@endpushonce

/* ===== views\components\inputs\image-link.blade.php ===== */
<div class="form-group">
    <label for="input-{{$name}}">{{$label}}</label>
    <div class="input-group">
        <input readonly type="text" class="form-control ckfinder-input" name="{{ $name }}" id="input-{{ $name }}"
               required value="{{$value==""?old($name):$value}}">
        <span class="input-group-append">
            <button type="button" class="btn btn-secondary ckfinder-popup" id="button-popup-{{$name}}">
                Duyệt Ảnh
            </button>
        </span>
    </div>
    @error($name)
    <div class="text-danger">{{ $message }}</div>
    @enderror

    <div id="preview-container-{{ $name }}" style="margin-top: 10px;">
        @if($value || old($name))
            <img src="{{ $value ?: old($name) }}" alt="Image Preview" id="preview-image-{{ $name }}"
                 style="max-width: 200px; max-height: 200px; display: block;">
        @else
            <img src="" alt="Image Preview" id="preview-image-{{ $name }}"
                 style="max-width: 200px; max-height: 200px; display: none;">
        @endif
    </div>
</div>

@push("scripts")
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let button_popup_{{$name}} = document.getElementById("button-popup-{{$name}}");
            let preview_container_{{$name}} = document.getElementById("preview-container-{{$name}}");
            let preview_image_{{$name}} = document.getElementById("preview-image-{{$name}}");

            button_popup_{{$name}}.onclick = async () => {
                CKFinder.popup({
                    chooseFiles: true,
                    width: 800,
                    height: 600,
                    onInit: function (finder) {
                        finder.on('files:choose', function (evt) {
                            let file = evt.data.files.first();
                            let fullUrl = file.getUrl();
                            let path;
                            try {
                                let urlObj = new URL(fullUrl);
                                path = urlObj.pathname;
                            } catch (e) {
                                path = fullUrl;
                            }
                            let parentElement = button_popup_{{$name}}.closest(".input-group");
                            if (parentElement) {
                                let input = parentElement.querySelector(".ckfinder-input");
                                if (input) {
                                    input.value = path;
                                }
                            }

                            if (preview_image_{{$name}}) {
                                preview_image_{{$name}}.src = path;
                                preview_image_{{$name}}.style.display = "block";
                            }
                            if (preview_container_{{$name}}) {
                                preview_container_{{$name}}.style.display = "block";
                            }
                        });
                        finder.on('file:choose:resizedImage', function (evt) {
                        });
                    }
                });
            }
        });
    </script>
@endpush


/* ===== views\components\inputs\number.blade.php ===== */
<div class="form-group">
    <label for="input-{{$name}}">{{$label}}</label>
    <input type="number" class="form-control" id="input-{{$name}}" name="{{$name}}"
           value="{{$value ?: old($name)}}" placeholder="Enter {{$label}}" required>
    @error($name)
    <div class="text-danger">{{ $message }}</div>
    @enderror
</div>


/* ===== views\components\inputs\select-multiple.blade.php ===== */
<div class="form-group">
    <label for="input-{{$name}}">{{$label}}</label>
    <select name="{{$name}}[]" class="form-control" id="input-{{$name}}" style="width: 100%;"
            required multiple {{$attributes}}>
        {{$slot}}
    </select>
    @error($name)
    <div class="text-danger">{{ $message }}</div>
    @enderror
</div>

@pushonce('styles')
    <!-- Select 2 Style -->
    <link rel="stylesheet" href="{{asset("/admin/plugins/select2/css/select2.min.css")}}">
    <link rel="stylesheet" href="{{asset("/admin/plugins/select2-bootstrap4-theme/select2-bootstrap4.min.css")}}">
@endpushonce

@pushonce('scripts')
    <!-- Select 2 Script -->
    <script src="{{asset("/admin/plugins/select2/js/select2.full.min.js")}}"></script>
@endpushonce

@push('scripts')
    <script>
        $('#input-{{$name}}').select2({
            theme: "bootstrap4"
        });
    </script>
@endpush


/* ===== views\components\inputs\select-simple.blade.php ===== */
<div class="form-group">
    <label for="input-{{$name}}">{{$label}}</label>
    <select name="{{$name}}" id="input-{{$name}}" class="form-control" required>
        {{$slot}}
    </select>
    @error($name)
    <div class="text-danger">{{ $message }}</div>
    @enderror
</div>


/* ===== views\components\inputs\select.blade.php ===== */
<div class="form-group">
    <label for="input-{{$name}}">{{$label}}</label>
    <select name="{{$name}}" class="form-control" id="input-{{$name}}" style="width: 100%;"
            required {{$attributes}}>
        {{$slot}}
    </select>
    @error($name)
    <div class="text-danger">{{ $message }}</div>
    @enderror
</div>

@pushonce('styles')
    <!-- Select 2 Style -->
    <link rel="stylesheet" href="{{asset("/admin/plugins/select2/css/select2.min.css")}}">
    <link rel="stylesheet" href="{{asset("/admin/plugins/select2-bootstrap4-theme/select2-bootstrap4.min.css")}}">
@endpushonce

@pushonce('scripts')
    <!-- Select 2 Script -->
    <script src="{{asset("/admin/plugins/select2/js/select2.full.min.js")}}"></script>
@endpushonce

@push('scripts')
    <script>
        $('#input-{{$name}}').select2({
            theme: "bootstrap4"
        });
    </script>
@endpush


/* ===== views\components\inputs\text-area-array.blade.php ===== */
<div class="card">
    <div class="card-header">
        <h3 class="card-title">{{ $label }}</h3>
    </div>
    <div class="card-body">
        <div class="form-group">
            <div class="input-group">
                <button type="button" class="btn btn-secondary btn-add-textarea-{{ $name }}">Thêm</button>
            </div>
        </div>

        <div id="textarea-container-{{ $name }}" class="mt-2">
            <ul class="list-group" id="list-{{$name}}">
                @if (is_array($value) && count($value) > 0)
                    @foreach ($value as $index => $item)
                        <li class="list-group-item d-flex align-items-start flex-column">
                            <div class="d-flex align-items-center mb-2 w-100">
                                <span class="mr-2 textarea-index">{{ $index + 1 }}.</span>
                                <textarea class="form-control flex-grow-1 w-100" name="{{ $name }}[]" rows="3"
                                          placeholder="Enter {{ $label }}">{{ $item }}</textarea>
                            </div>
                            <div class="mt-2 d-flex justify-content-end w-100">
                                <button type="button" class="btn btn-danger btn-sm btn-remove-textarea-{{$name}}"
                                        data-index="{{ $index }}">Xoá
                                </button>
                            </div>
                        </li>
                    @endforeach
                @endif
            </ul>
        </div>

        @error($name)
        <div class="text-danger">{{ $message }}</div>
        @enderror
    </div>
</div>

@push("scripts")
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let list_{{$name}} = document.getElementById("list-{{$name}}");
            let buttonAdd_{{$name}} = document.querySelector(".btn-add-textarea-{{$name}}");
            let textareaCount = {{ is_array($value) ? count($value) : 0 }};


            buttonAdd_{{$name}}.addEventListener('click', function () {
                let li = document.createElement('li');
                li.classList.add('list-group-item', 'd-flex', 'align-items-start', 'flex-column');
                li.innerHTML = `<div class="d-flex align-items-center mb-2 w-100">
                                        <span class="mr-2 textarea-index">${textareaCount + 1}.</span>
                                            <textarea class="form-control flex-grow-1 w-100" name="{{ $name }}[]" rows="3" placeholder="Enter {{ $label }}"></textarea>
                                   </div>
                                 <div class="mt-2 d-flex justify-content-end w-100">
                                        <button type="button" class="btn btn-danger btn-sm btn-remove-textarea-{{$name}}" data-index="${textareaCount}">Xoá</button>
                                   </div>`;
                list_{{$name}}.appendChild(li);
                addRemoveEvent(li.querySelector('.btn-remove-textarea-{{$name}}'));
                textareaCount++;
                updateTextareaIndexes();
            });

            function addRemoveEvent(removeButton) {
                removeButton.addEventListener('click', function () {
                    removeButton.closest('li').remove();
                    updateTextareaIndexes();
                });
            }

            function updateTextareaIndexes() {
                list_{{$name}}.querySelectorAll('.list-group-item').forEach((li, index) => {
                    li.querySelector('.textarea-index').textContent = `${index + 1}.`
                })
            }

            list_{{$name}}.querySelectorAll('.btn-remove-textarea-{{$name}}').forEach(button => {
                addRemoveEvent(button)
            });
        });
    </script>
@endpush


/* ===== views\components\inputs\text-area.blade.php ===== */
<div class="form-group">
    <label for="input-{{$name}}">{{$label}}</label>
    <textarea class="form-control" id="input-{{$name}}" name="{{$name}}" required
              rows="3" placeholder="Enter {{$label}}">{{$value ?: old($name)}}</textarea>
    @error($name)
    <div class="text-danger">{{ $message }}</div>
    @enderror
</div>


/* ===== views\components\inputs\text-array.blade.php ===== */
<div class="card">
    <div class="card-header">
        <h3 class="card-title">{{$label}}</h3>
    </div>
    <div class="card-body">
        <div class="form-group">
            <label for="input-{{$name}}">{{$label}}</label>
            <div class="input-group">
                <input type="text" class="form-control" id="input-{{$name}}" name="{{$name}}"
                       placeholder="Enter {{$label}}">
                <div class="input-group-append">
                    <button type="button" class="btn btn-secondary btn-add-{{$name}}">Thêm</button>
                </div>
            </div>
        </div>
        <ul id="list-{{ $name }}" class="list-group">
            @if (is_array($value) && count($value) > 0)
                @foreach ($value as $item)
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <input type="text" class="form-control flex-grow-1 mr-2" name="{{ $name }}[]"
                               value="{{ $item }}">
                        <button type="button" class="btn btn-danger btn-sm btn-remove-{{$name}}"
                                data-value="{{ $item }}">Xoá
                        </button>
                    </li>
                @endforeach
            @endif
        </ul>
        @error($name)
        <div class="text-danger">{{ $message }}</div>
        @enderror
    </div>
</div>

@push("scripts")
    <script>
        let input_{{$name}} = document.getElementById("input-{{$name}}");
        let list_{{$name}} = document.getElementById("list-{{$name}}");
        let button_add_{{$name}} = document.querySelector(".btn-add-{{$name}}");

        button_add_{{$name}}.addEventListener('click', function () {
            let value = input_{{$name}}.value.trim();
            if (value !== "") {
                let li = document.createElement('li');
                li.classList.add('list-group-item', 'd-flex', 'justify-content-between', 'align-items-center');
                li.innerHTML = //html
                    `<input type="text" class="form-control flex-grow-1 mr-2" name="{{$name}}[]" value="${value}">
                                    <button type="button" class="btn btn-danger btn-sm btn-remove-{{$name}}" data-value="${value}">Xoá</button>`;
                list_{{$name}}.appendChild(li);
                input_{{$name}}.value = "";
                // Thêm sự kiện xóa mới cho nút xóa vừa tạo
                addRemoveEvent(li.querySelector('.btn-remove-{{$name}}'));
            }
        });

        function addRemoveEvent(removeButton) {
            removeButton.addEventListener('click', function () {
                removeButton.closest('li').remove();
            });
        }

        list_{{$name}}.querySelectorAll('.btn-remove-{{$name}}').forEach(button => {
            addRemoveEvent(button)
        });
    </script>
@endpush


/* ===== views\components\inputs\text.blade.php ===== */
<div class="form-group">
    <label for="input-{{$name}}">{{$label}}</label>
    <input type="text" class="form-control" id="input-{{$name}}" name="{{$name}}"
           value="{{ $value ?: old($name) }}" placeholder="Enter {{$label}}" required>
    @error($name)
    <div class="text-danger">{{ $message }}</div>
    @enderror
</div>


/* ===== views\components\inputs\time.blade.php ===== */
<div class="form-group">
    <label for="input-{{$name}}">{{$label}}</label>
    <input type="time" class="form-control" id="input-{{$name}}" name="{{$name}}"
           value="{{$value ?: old($name)}}" required
           onfocus="this.showPicker()">
    @error($name)
    <div class="text-danger">{{ $message }}</div>
    @enderror
</div>

@if($value=="" && old($name) == "")
    @push('scripts')
        <script>
            document.getElementById('input-{{$name}}').value = (new Date()).toTimeString().substring(0, 5);
        </script>
    @endpush
@endif



/* ===== views\components\menus\menu-bar.blade.php ===== */
<li class="nav-item">
    <a href="{{$route}}" class="nav-link">
        <i class="nav-icon {{$icon}}"></i>
        <p>
            {{$name}}
            @if($slot!="")
                <i class="right fas fa-angle-left"></i>
            @endif
        </p>
    </a>
    @if($slot!="")
        <ul class="nav nav-treeview">
            {{$slot}}
        </ul>
    @endif
</li>


/* ===== views\components\menus\menu-item.blade.php ===== */
<li class="nav-item">
    <a href="{{$route}}" class="nav-link">
        <i class="far fa-circle nav-icon"></i>
        <p>{{$name}}</p>
    </a>
</li>


/* ===== views\kingexpressbus\admin\components\light-dark-mode.blade.php ===== */
<!-- Light/dark mode -->
<script>
    /*!
     * Color mode toggler for Bootstrap's docs (https://getbootstrap.com/)
     * Copyright 2011-2024 The Bootstrap Authors
     * Licensed under the Creative Commons Attribution 3.0 Unported License.
     * Modified by Simpleqode
     */

    (() => {
        'use strict';

        const getStoredTheme = () => localStorage.getItem('theme');
        const setStoredTheme = (theme) => localStorage.setItem('theme', theme);

        const getPreferredTheme = () => {
            const storedTheme = getStoredTheme();
            if (storedTheme) {
                return storedTheme;
            }

            return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        };

        const setTheme = (theme) => {
            if (theme === 'auto') {
                document.documentElement.setAttribute('data-bs-theme', window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
            } else {
                document.documentElement.setAttribute('data-bs-theme', theme);
            }
        };

        setTheme(getPreferredTheme());

        const showActiveTheme = (theme, focus = false) => {
            const themeSwitchers = document.querySelectorAll('[data-bs-theme-switcher]');

            themeSwitchers.forEach((themeSwitcher) => {
                const themeSwitcherIcon = themeSwitcher.querySelector('.material-symbols-outlined');
                themeSwitcherIcon.innerHTML = theme === 'light' ? 'light_mode' : theme === 'dark' ? 'dark_mode' : 'contrast';

                if (focus) {
                    themeSwitcher.focus();
                }
            });

            document.querySelectorAll('[data-bs-theme-value]').forEach((element) => {
                element.classList.remove('active');
                element.setAttribute('aria-pressed', 'false');

                if (element.getAttribute('data-bs-theme-value') === theme) {
                    element.classList.add('active');
                    element.setAttribute('aria-pressed', 'true');
                }
            });
        };

        const refreshCharts = () => {
            const charts = document.querySelectorAll('.chart-canvas');

            charts.forEach((chart) => {
                const chartId = chart.getAttribute('id');
                const instance = Chart.getChart(chartId);

                if (instance) {
                    instance.options.scales.y.grid.color = getComputedStyle(document.documentElement).getPropertyValue('--bs-border-color');
                    instance.options.scales.y.ticks.color = getComputedStyle(document.documentElement).getPropertyValue('--bs-secondary-color');
                    instance.options.scales.x.ticks.color = getComputedStyle(document.documentElement).getPropertyValue('--bs-secondary-color');
                    instance.update();
                }
            });
        };

        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
            const storedTheme = getStoredTheme();
            if (storedTheme !== 'light' && storedTheme !== 'dark') {
                setTheme(getPreferredTheme());
            }
        });

        window.addEventListener('DOMContentLoaded', () => {
            showActiveTheme(getPreferredTheme());

            document.querySelectorAll('[data-bs-theme-value]').forEach((toggle) => {
                toggle.addEventListener('click', (e) => {
                    e.preventDefault();
                    const theme = toggle.getAttribute('data-bs-theme-value');
                    setStoredTheme(theme);
                    setTheme(theme);
                    showActiveTheme(theme, true);
                    refreshCharts();
                });
            });
        });
    })();
</script>


/* ===== views\kingexpressbus\admin\components\menu.blade.php ===== */
<ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu"
    data-accordion="false">

    <!-- ADMIN BASE -->
    <li class="nav-header">Admin</li>
    
    {{-- THAY ĐỔI MỤC NÀY: Trỏ thẳng đến trang quản lý giao diện Trang chủ --}}
    <x-menus.menu-bar :route="route('admin.dashboard.index')" name="Quản lý Trang chủ" icon="fas fa-home">
    </x-menus.menu-bar>

    <x-menus.menu-bar icon="fa-regular fa-newspaper" name="Quản lý Tin tức" route="#">
        <x-menus.menu-item name="Danh mục Tin tức" :route="route('admin.categories.index')"/>
        <x-menus.menu-item name="Danh sách Tin tức" :route="route('admin.news.index')"/>
    </x-menus.menu-bar>

    <x-menus.menu-bar icon="fas fa-graduation-cap" name="Quản lý Đào tạo" route="#">
        <x-menus.menu-item name="Khoá Đào tạo" :route="route('admin.training.index')"/>
        <x-menus.menu-item name="Danh sách Giáo viên" :route="route('admin.teachers.index')"/>
    </x-menus.menu-bar>

    <x-menus.menu-bar icon="fas fa-address-book" name="Quản lý Khách hàng" route="#">
        <x-menus.menu-item name="Đăng ký tư vấn" :route="route('admin.customers.index')"/>
    </x-menus.menu-bar>
    
</ul>

/* ===== views\kingexpressbus\admin\components\navbar.blade.php ===== */
<nav class="main-header navbar navbar-expand navbar-white navbar-light">
    <!-- Left navbar links -->
    <ul class="navbar-nav">
        <li class="nav-item">
            <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
        </li>
    </ul>

    <!-- Right navbar links -->
    <ul class="navbar-nav ml-auto">
        <!-- Notifications Dropdown Menu -->
        <li class="nav-item dropdown">
            <a class="nav-link" data-toggle="dropdown" href="#">
                <i class="far fa-user"></i>
            </a>
            <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                <span class="dropdown-item dropdown-header">Tài khoản</span>
                <div class="dropdown-divider"></div>
                <a href="/admin/logout" class="dropdown-item">
                    <i class="fas fa-sign-out-alt mr-2"></i> Đăng xuất
                </a>
                <div class="dropdown-divider"></div>
            </div>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-widget="fullscreen" href="#" role="button">
                <i class="fas fa-expand-arrows-alt"></i>
            </a>
        </li>
    </ul>
</nav>


/* ===== views\kingexpressbus\admin\components\scripts.blade.php ===== */
<!-- jQuery -->
<script src="{{asset('/admin/plugins/jquery/jquery.min.js')}}"></script>
<!-- Bootstrap 4 -->
<script src="{{asset('/admin/plugins/bootstrap/js/bootstrap.bundle.min.js')}}"></script>
<!-- Bootstrap4 Duallistbox -->
<script src="{{asset('/admin/plugins/bootstrap4-duallistbox/jquery.bootstrap-duallistbox.min.js')}}"></script>
<!-- InputMask -->
<script src="{{asset('/admin/plugins/moment/moment.min.js')}}"></script>
<script src="{{asset('/admin/plugins/inputmask/jquery.inputmask.min.js')}}"></script>
<!-- date-range-picker -->
<script src="{{asset('/admin/plugins/daterangepicker/daterangepicker.js')}}"></script>
<!-- bootstrap color picker -->
<script src="{{asset('/admin/plugins/bootstrap-colorpicker/js/bootstrap-colorpicker.min.js')}}"></script>
<!-- Tempusdominus Bootstrap 4 -->
<script src="{{asset('/admin/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js')}}"></script>
<!-- Bootstrap Switch -->
<script src="{{asset('/admin/plugins/bootstrap-switch/js/bootstrap-switch.min.js')}}"></script>
<!-- BS-Stepper -->
<script src="{{asset('/admin/plugins/bs-stepper/js/bs-stepper.min.js')}}"></script>
<!-- dropzonejs -->
<script src="{{asset('/admin/plugins/dropzone/min/dropzone.min.js')}}"></script>

<!-- Datatable plugins -->
<script src="{{asset('/admin/plugins/datatables/jquery.dataTables.min.js')}}"></script>
<script src="{{asset('/admin/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js')}}"></script>
<script src="{{asset('/admin/plugins/datatables-responsive/js/dataTables.responsive.min.js')}}"></script>
<script src="{{asset('/admin/plugins/datatables-responsive/js/responsive.bootstrap4.min.js')}}"></script>
<script src="{{asset('/admin/plugins/datatables-buttons/js/dataTables.buttons.min.js')}}"></script>
<script src="{{asset('/admin/plugins/datatables-buttons/js/buttons.bootstrap4.min.js')}}"></script>
<script src="{{asset('/admin/plugins/jszip/jszip.min.js')}}"></script>
<script src="{{asset('/admin/plugins/pdfmake/pdfmake.min.js')}}"></script>
<script src="{{asset('/admin/plugins/pdfmake/vfs_fonts.js')}}"></script>
<script src="{{asset('/admin/plugins/datatables-buttons/js/buttons.html5.min.js')}}"></script>
<script src="{{asset('/admin/plugins/datatables-buttons/js/buttons.print.min.js')}}"></script>
<script src="{{asset('/admin/plugins/datatables-buttons/js/buttons.colVis.min.js')}}"></script>
<script src="{{asset('/admin/dist/js/react-helper.js')}}"></script>

{{-- Ck plugins --}}
<script src="{{asset('/js/ckeditor/ckeditor.js')}}"></script>
@include("ckfinder::setup")

<!-- AdminLTE App -->
<script src="{{asset('/admin/dist/js/adminlte.min.js')}}"></script>




/* ===== views\kingexpressbus\admin\components\sidebar.blade.php ===== */
<aside class="main-sidebar sidebar-dark-primary elevation-4">
    <a href="#" class="brand-link">
        <img src="{{asset("/admin/dist/img/AdminLTELogo.png")}}" alt="AdminLTE Logo"
             class="brand-image img-circle elevation-3"
             style="opacity: .8">
        <span class="brand-text font-weight-light">{{config("app.name")}}</span>
    </a>
    <div class="sidebar">
        <nav class="mt-2">
            @include("kingexpressbus.admin.components.menu")
        </nav>
    </div>
</aside>

@push('scripts')
    <script>
        let url = window.location;

        $('ul.nav-sidebar a').filter(function () {
            if (this.href) {
                return this.href == url
            }
        }).addClass('active');

        $('ul.nav-treeview a').filter(function () {
            if (this.href) {
                return this.href == url
            }
        }).parentsUntil(" .nav-sidebar> .nav-treeview").addClass('menu-open').prev('a').addClass('active');
    </script>
@endpush


/* ===== views\kingexpressbus\admin\components\sidenav-theme-mode.blade.php ===== */
<aside class="aside aside-sm d-none d-xl-flex">
    <nav class="navbar navbar-expand-xl navbar-vertical">
        <div class="container-fluid">
            <div class="collapse navbar-collapse" id="sidenavSmallCollapse">
                <!-- Nav -->
                <nav class="navbar-nav nav-pills h-100">
                    <div class="nav-item">
                        <div data-bs-toggle="tooltip" data-bs-placement="right" data-bs-trigger="hover"
                             data-bs-title="Color mode">
                            <a
                                class="nav-link"
                                data-bs-toggle="collapse"
                                data-bs-theme-switcher
                                href="#colorModeOptions"
                                role="button"
                                aria-expanded="false"
                                aria-controls="colorModeOptions"
                            >
                                <span class="material-symbols-outlined mx-auto"> </span>
                            </a>
                        </div>
                        <div class="collapse" id="colorModeOptions">
                            <div class="border-top border-bottom py-2">
                                <a
                                    class="nav-link fs-sm"
                                    data-bs-toggle="tooltip"
                                    data-bs-placement="right"
                                    data-bs-trigger="hover"
                                    data-bs-title="Light"
                                    data-bs-theme-value="light"
                                    href="#"
                                    role="button"
                                >
                                    <span class="material-symbols-outlined mx-auto"> light_mode </span>
                                </a>
                                <a
                                    class="nav-link fs-sm"
                                    data-bs-toggle="tooltip"
                                    data-bs-placement="right"
                                    data-bs-trigger="hover"
                                    data-bs-title="Dark"
                                    data-bs-theme-value="dark"
                                    href="#"
                                    role="button"
                                >
                                    <span class="material-symbols-outlined mx-auto"> dark_mode </span>
                                </a>
                                <a
                                    class="nav-link fs-sm"
                                    data-bs-toggle="tooltip"
                                    data-bs-placement="right"
                                    data-bs-trigger="hover"
                                    data-bs-title="Auto"
                                    data-bs-theme-value="auto"
                                    href="#"
                                    role="button"
                                >
                                    <span class="material-symbols-outlined mx-auto"> contrast </span>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="nav-item" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-toggle="hover"
                         data-bs-title="Go to product page">
                        <a class="nav-link" href="https://themes.getbootstrap.com/product/dashbrd/" target="_blank">
                            <span class="material-symbols-outlined mx-auto"> local_mall </span>
                        </a>
                    </div>
                    <div class="nav-item mt-auto" data-bs-toggle="tooltip" data-bs-placement="right"
                         data-bs-toggle="hover" data-bs-title="Contact us">
                        <a class="nav-link" href="mailto:yevgenysim+simpleqode@gmail.com">
                            <span class="material-symbols-outlined mx-auto"> support </span>
                        </a>
                    </div>
                </nav>
            </div>
        </div>
    </nav>
</aside>


/* ===== views\kingexpressbus\admin\components\styles.blade.php ===== */
<!-- Google Font: Source Sans Pro -->
<link rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<!-- Font Awesome -->
<link rel="stylesheet" href="{{ asset('admin/plugins/fontawesome-free/css/all.min.css') }}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous" referrerpolicy="no-referrer"/>
<!-- daterange picker -->
<link rel="stylesheet" href="{{ asset('admin/plugins/daterangepicker/daterangepicker.css') }}">
<!-- iCheck for checkboxes and radio inputs -->
<link rel="stylesheet" href="{{ asset('admin/plugins/icheck-bootstrap/icheck-bootstrap.min.css') }}">
<!-- Bootstrap Color Picker -->
<link rel="stylesheet" href="{{ asset('admin/plugins/bootstrap-colorpicker/css/bootstrap-colorpicker.min.css') }}">
<!-- Tempusdominus Bootstrap 4 -->
<link rel="stylesheet"
      href="{{ asset('admin/plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css') }}">
<!-- Bootstrap4 Duallistbox -->
<link rel="stylesheet" href="{{ asset('admin/plugins/bootstrap4-duallistbox/bootstrap-duallistbox.min.css') }}">
<!-- BS Stepper -->
<link rel="stylesheet" href="{{ asset('admin/plugins/bs-stepper/css/bs-stepper.min.css') }}">
<!-- dropzonejs -->
<link rel="stylesheet" href="{{ asset('admin/plugins/dropzone/min/dropzone.min.css') }}">

<!-- DataTables -->
<link rel="stylesheet" href="{{ asset('admin/plugins/datatables-bs4/css/dataTables.bootstrap4.min.css') }}">
<link rel="stylesheet" href="{{ asset('admin/plugins/datatables-responsive/css/responsive.bootstrap4.min.css') }}">
<link rel="stylesheet" href="{{ asset('admin/plugins/datatables-buttons/css/buttons.bootstrap4.min.css') }}">

<!-- Theme style -->
<link rel="stylesheet" href="{{ asset('admin/dist/css/adminlte.min.css') }}">


/* ===== views\kingexpressbus\admin\components\topnav.blade.php ===== */
<nav class="navbar d-none d-xl-flex px-xl-6">
    <div class="container flex-column align-items-stretch">
        <div class="row">
            <div class="col">
            </div>
            <div class="col-auto">
                {{-- Menu user function --}}
            </div>
        </div>
    </div>
</nav>


/* ===== views\kingexpressbus\admin\layouts\main.blade.php ===== */
<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>@yield("title")</title>
    @include('kingexpressbus.admin.components.styles')
    @stack('styles')

    <style>
        .image-preview-grid .list-unstyled {
            gap: 15px;
        }
        .image-preview-grid .grid-item {
            position: relative;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 5px;
            width: 150px;
            height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f8f9fa;
        }
        .image-preview-grid .grid-item img {
            max-width: 100%;
            max-height: 100%;
            object-fit: cover;
        }
        .image-preview-grid .grid-item .btn-remove-image {
            position: absolute;
            top: -10px;
            right: -10px;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            line-height: 1;
        }

        #stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        .stat-item {
            border: 1px solid #dee2e6 !important;
            border-radius: .25rem !important;
            padding: 1.25rem !important;
            margin-bottom: 0 !important;
            display: flex;
            flex-direction: column;
        }
        .stat-item .mt-2 {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .stat-item img {
            border-radius: 4px;
            border: 1px solid #ddd;
            padding: 3px;
            background: #fff;
        }
        .fag-item {
             display: flex;
             flex-direction: column;
             border: 1px solid #dee2e6 !important;
             border-radius: .25rem !important;
             padding: 1.25rem !important;
             margin-bottom: 1rem !important;
        }
        .stat-item .remove-item, .fag-item .remove-item {
            margin-top: auto;
            align-self: center;
        }
        .stat-item hr, .fag-item hr {
            display: none;
        }

        #templates .stat-item, #templates .fag-item {
            display: block; 
        }
    </style>
</head>

<body class="hold-transition sidebar-mini">
<div class="wrapper">
    @include('kingexpressbus.admin.components.navbar')

    @include('kingexpressbus.admin.components.sidebar')

    <div class="content-wrapper">
        <section class="content-header">
            <div class="container-fluid">
                <div class="row mb-2">
                    <div class="col-sm-6">
                        <h1>@yield('title')</h1>
                    </div>
                    <div class="col-sm-6">
                        <ol class="breadcrumb float-sm-right">
                            <li class="breadcrumb-item"><a href="#">Dashboard</a></li>
                            <li class="breadcrumb-item active">@yield('title')</li>
                        </ol>
                    </div>
                </div>
            </div>
        </section>

        <section class="content">
            <div class="container-fluid">
                @yield("content")
            </div>
        </section>
    </div>
    <footer class="main-footer">
        <div class="float-right d-none d-sm-block">
            <b>Version</b> 3.2.0
        </div>
        <strong>Copyright © 2025 <a href="#">{{config("app.name")}}</a>.</strong>
    </footer>
    <aside class="control-sidebar control-sidebar-dark">
    </aside>
</div>

<!-- CK Editor and CK Finder set up -->
@include('ckfinder::setup')
@include('kingexpressbus.admin.components.scripts')
@stack('scripts')
</body>
</html>

/* ===== views\kingexpressbus\admin\modules\categories\createOrEdit.blade.php ===== */
@php
    $isEdit = !empty($category?->id);
@endphp

@extends('kingexpressbus.admin.layouts.main')
@section('title', $isEdit ? 'Sửa Danh mục' : 'Tạo Danh mục')

@section('content')
    <div class="card card-primary">
        <div class="card-header">
            <h3 class="card-title">{{ $isEdit ? 'Sửa Danh mục: ' . $category->name : 'Tạo mới Danh mục' }}</h3>
        </div>
        <form
            action="{{ $isEdit ? route('admin.categories.update', ['category' => $category->id]) : route('admin.categories.store') }}"
            method="post">
            @csrf
            @if($isEdit)
                @method('PUT')
            @endif

            <div class="card-body">
                @if ($errors->any())
                    <div class="alert alert-danger">
                        <strong>Có lỗi xảy ra!</strong> Vui lòng kiểm tra lại các trường dữ liệu.
                    </div>
                @endif

                <x-inputs.text label="Tên Danh mục" name="name" :value="old('name', $category?->name)" required/>
                
                {{-- Cột 'count' sẽ được cập nhật tự động, không cần input ở đây. --}}

            </div>
            <div class="card-footer">
                <button type="submit" class="btn btn-primary">{{ $isEdit ? 'Cập nhật' : 'Tạo mới' }}</button>
                <a href="{{ route('admin.categories.index') }}" class="btn btn-secondary">Hủy</a>
            </div>
        </form>
    </div>
@endsection

/* ===== views\kingexpressbus\admin\modules\categories\index.blade.php ===== */
@extends('kingexpressbus.admin.layouts.main')
@section('title', 'Danh sách Danh mục')

@section('content')
    <div class="card">
        <div class="card-header">
            <h3 class="card-title">Quản lý Danh mục Tin tức</h3>
        </div>
        <div class="card-body">
            @include('kingexpressbus.admin.partials.alerts')

            <a href="{{ route('admin.categories.create') }}" class="btn btn-primary mb-3">
                <i class="fas fa-plus"></i> Tạo mới Danh mục
            </a>

            <table id="data-table-categories" class="table table-bordered table-striped table-hover">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Tên Danh mục</th>
                    <th>Slug</th> {{-- <--- THÊM CỘT MỚI --}}
                    <th>Số lượng tin tức</th>
                    <th>Hành động</th>
                </tr>
                </thead>
                <tbody>
                @foreach($categories as $category)
                    <tr>
                        <td>{{ $category->id }}</td>
                        <td>{{ $category->name }}</td>
                        <td>{{ $category->slug }}</td> {{-- <--- THÊM DỮ LIỆU CỘT MỚI --}}
                        <td>{{ $category->count }}</td>
                        <td>
                            <a class="btn btn-warning btn-sm"
                               href="{{ route('admin.categories.edit', ['category' => $category->id]) }}">
                                <i class="fas fa-edit"></i> Sửa
                            </a>
                            <form action="{{ route('admin.categories.destroy', ['category' => $category->id]) }}"
                                  method="POST" style="display: inline-block;">
                                @csrf
                                @method('DELETE')
                                <button type="submit" class="btn btn-danger btn-sm"
                                        onclick="return confirm('Bạn có chắc muốn xóa Danh mục này?')">
                                    <i class="fas fa-trash"></i> Xoá
                                </button>
                            </form>
                        </td>
                    </tr>
                @endforeach
                </tbody>
            </table>
        </div>
    </div>
@endsection

@push('scripts')
    <script>
        $(document).ready(function () {
            $('#data-table-categories').DataTable({
                "responsive": true, "lengthChange": false, "autoWidth": false,
                "buttons": ["copy", "csv", "excel", "pdf", "print", "colvis"],
                "language": {"url": "/admin/plugins/datatables/Vietnamese.json"},
                "order": [[1, "asc"]]
            }).buttons().container().appendTo('#data-table-categories_wrapper .col-md-6:eq(0)');
        });
    </script>
@endpush

/* ===== views\kingexpressbus\admin\modules\customers\index.blade.php ===== */
@extends('kingexpressbus.admin.layouts.main')
@section('title', 'Danh sách Khách hàng đăng ký')

@section('content')
    <div class="card">
        <div class="card-header">
            <h3 class="card-title">Quản lý Khách hàng đăng ký</h3>
        </div>
        <div class="card-body">
            @include('kingexpressbus.admin.partials.alerts')

            <table id="data-table-customers" class="table table-bordered table-striped table-hover">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Tên Phụ huynh</th>
                    <th>Điện thoại</th>
                    <th>Tên Học viên</th>
                    <th>Khóa học đăng ký</th>
                    <th>Ngày đăng ký</th>
                    <th>Hành động</th>
                </tr>
                </thead>
                <tbody>
                @foreach($customers as $customer)
                    <tr>
                        <td>{{ $customer->id }}</td>
                        <td>{{ $customer->full_name_parent }}</td>
                        <td>{{ $customer->phone }}</td>
                        <td>{{ $customer->full_name_children }}</td>
                        <td>{{ $customer->training_title ?? 'N/A' }}</td>
                        <td>{{ \Carbon\Carbon::parse($customer->created_at)->format('d/m/Y H:i') }}</td>
                        <td>
                            {{-- THÊM NÚT "XEM" Ở ĐÂY --}}
                            <a class="btn btn-info btn-sm"
                               href="{{ route('admin.customers.show', ['customer' => $customer->id]) }}" title="Xem chi tiết">
                                <i class="fas fa-eye"></i> Xem
                            </a>
                            
                            <form action="{{ route('admin.customers.destroy', ['customer' => $customer->id]) }}"
                                  method="POST" style="display: inline-block;">
                                @csrf
                                @method('DELETE')
                                <button type="submit" class="btn btn-danger btn-sm"
                                        onclick="return confirm('Bạn có chắc muốn xóa đăng ký này?')">
                                    <i class="fas fa-trash"></i> Xoá
                                </button>
                            </form>
                        </td>
                    </tr>
                @endforeach
                </tbody>
            </table>
        </div>
    </div>
@endsection

@push('scripts')
    {{-- Script không thay đổi --}}
    <script>
        $(document).ready(function () {
            $('#data-table-customers').DataTable({
                "responsive": true, "lengthChange": false, "autoWidth": false,
                "buttons": ["copy", "csv", "excel", "pdf", "print", "colvis"],
                "language": {"url": "/admin/plugins/datatables/Vietnamese.json"},
                "order": [[5, "desc"]] 
            }).buttons().container().appendTo('#data-table-customers_wrapper .col-md-6:eq(0)');
        });
    </script>
@endpush

/* ===== views\kingexpressbus\admin\modules\customers\show.blade.php ===== */
@extends('kingexpressbus.admin.layouts.main')
@section('title', 'Chi tiết Đăng ký của: ' . $customer->full_name_parent)

@section('content')
<div class="card">
    <div class="card-header">
        <h3 class="card-title">Chi tiết Đăng ký #{{ $customer->id }}</h3>
        <div class="card-tools">
            <a href="{{ route('admin.customers.index') }}" class="btn btn-secondary btn-sm">
                <i class="fas fa-arrow-left"></i> Quay lại Danh sách
            </a>
        </div>
    </div>
    <div class="card-body">
        <div class="row">
            {{-- Thông tin Phụ huynh --}}
            <div class="col-md-6 mb-4">
                <h5>Thông tin Phụ huynh</h5>
                <table class="table table-sm table-bordered">
                    <tr>
                        <th style="width: 150px;">Họ tên</th>
                        <td>{{ $customer->full_name_parent }}</td>
                    </tr>
                    <tr>
                        <th>Điện thoại</th>
                        <td>{{ $customer->phone }}</td>
                    </tr>
                    <tr>
                        <th>Email</th>
                        <td>{{ $customer->email }}</td>
                    </tr>
                </table>
            </div>

            {{-- Thông tin Học viên --}}
            <div class="col-md-6 mb-4">
                <h5>Thông tin Học viên</h5>
                <table class="table table-sm table-bordered">
                    <tr>
                        <th style="width: 150px;">Họ tên</th>
                        <td>{{ $customer->full_name_children }}</td>
                    </tr>
                    <tr>
                        <th>Ngày sinh</th>
                        <td>{{ \Carbon\Carbon::parse($customer->date_of_birth)->format('d/m/Y') }}</td>
                    </tr>
                    <tr>
                        <th>Địa chỉ</th>
                        <td>{{ $customer->address }}</td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="row">
            {{-- Thông tin Đăng ký --}}
            <div class="col-12">
                <h5>Thông tin Đăng ký</h5>
                <table class="table table-sm table-bordered">
                     <tr>
                        <th style="width: 150px;">Khóa học đăng ký</th>
                        <td><strong>{{ $customer->training_title ?? 'N/A' }}</strong></td>
                    </tr>
                    <tr>
                        <th>Ngày đăng ký</th>
                        <td>{{ \Carbon\Carbon::parse($customer->created_at)->format('d/m/Y H:i:s') }}</td>
                    </tr>
                    <tr>
                        <th>Ghi chú</th>
                        {{-- Dùng nl2br để hiển thị xuống dòng cho đẹp --}}
                        <td>{!! nl2br(e($customer->note)) ?: 'Không có ghi chú.' !!}</td>
                    </tr>
                </table>
            </div>
        </div>

    </div>
</div>
@endsection

/* ===== views\kingexpressbus\admin\modules\dashboard\edit.blade.php ===== */
@extends('kingexpressbus.admin.layouts.main')
@section('title', 'Quản lý Trang chủ')

@section('content')
    <form action="{{ route('admin.dashboard.update') }}" method="POST">
        @csrf

        @if ($errors->any())
            <div class="alert alert-danger alert-dismissible">
                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
                <h5><i class="icon fas fa-ban"></i> Có lỗi xảy ra! Vui lòng kiểm tra lại các trường.</h5>
                <ul>
                    @foreach ($errors->all() as $error)
                        <li>{{ $error }}</li>
                    @endforeach
                </ul>
            </div>
        @endif
        @include('kingexpressbus.admin.partials.alerts')
        
        <div class="card card-primary">
            <div class="card-header"><h3 class="card-title">Khu vực Banner chính</h3></div>
            <div class="card-body">
                <x-inputs.text label="Tiêu đề Banner" name="banners[title]" :value="old('banners.title', $homePage->banners->title ?? '')"/>
                <x-inputs.text-area label="Mô tả Banner" name="banners[description]" :value="old('banners.description', $homePage->banners->description ?? '')"/>
                <x-inputs.image-link-array label="Danh sách ảnh Banner" name="banners[images]" :value="old('banners.images', $homePage->banners->images ?? [])"/>
            </div>
        </div>

        <div class="card card-info">
            <div class="card-header"><h3 class="card-title">Khu vực Thống kê (Stats)</h3></div>
            <div class="card-body">
                <div id="stats-container">
                    @foreach (old('stats', $homePage->stats ?? []) as $index => $stat)
                        <div class="stat-item">
                            <h5>Mục thống kê #<span class="stat-item-index">{{ $loop->iteration }}</span></h5>
                            <x-inputs.number label="Giá trị (Số)" name="stats[{{ $index }}][value]" :value="$stat['value'] ?? ''" />
                            <x-inputs.text label="Mô tả" name="stats[{{ $index }}][description]" :value="$stat['description'] ?? ''" />
                            <div class="form-group">
                                <label>Ảnh minh họa</label>
                                <div class="input-group">
                                    <input readonly type="text" class="form-control ckfinder-input" name="stats[{{ $index }}][images]" value="{{ $stat['images'] ?? '' }}">
                                    <span class="input-group-append">
                                        <button type="button" class="btn btn-secondary ckfinder-popup-dynamic">Duyệt Ảnh</button>
                                    </span>
                                </div>
                                <div class="mt-2">
                                    <img src="{{ $stat['images'] ?? '' }}" alt="Preview" style="max-width: 150px;" @style(['display: none;' => empty($stat['images'])])>
                                </div>
                            </div>
                            <div class="mt-auto text-center pt-3">
                                <button type="button" class="btn btn-danger btn-sm remove-item">Xóa mục này</button>
                            </div>
                        </div>
                    @endforeach
                </div>
                <button type="button" id="add-stat-item" class="btn btn-secondary">Thêm mục Thống kê</button>
            </div>
        </div>

        <div class="card card-warning">
            <div class="card-header"><h3 class="card-title">Câu hỏi thường gặp (FAQs)</h3></div>
            <div class="card-body">
                <div id="fags-container">
                     @foreach (old('fags', $homePage->fags ?? []) as $index => $fag)
                        <div class="fag-item">
                            <h5>Câu hỏi #<span class="fag-item-index">{{ $loop->iteration }}</span></h5>
                            <x-inputs.text label="Câu hỏi" name="fags[{{ $index }}][question]" :value="$fag['question'] ?? ''"/>
                            <x-inputs.text-area label="Câu trả lời" name="fags[{{ $index }}][answer]" :value="$fag['answer'] ?? ''"/>
                            <div class="mt-auto text-center pt-3">
                                <button type="button" class="btn btn-danger btn-sm remove-item">Xóa câu hỏi này</button>
                            </div>
                        </div>
                     @endforeach
                </div>
                 <button type="button" id="add-fag-item" class="btn btn-secondary">Thêm câu hỏi</button>
            </div>
        </div>

        <div class="card card-success">
            <div class="card-header"><h3 class="card-title">Thư viện Ảnh</h3></div>
            <div class="card-body">
                <x-inputs.image-link-array label="Danh sách ảnh trưng bày" name="images" :value="old('images', $homePage->images ?? [])"/>
            </div>
        </div>

         <div class="card card-danger">
            <div class="card-header"><h3 class="card-title">Link YouTube</h3></div>
            <div class="card-body">
                <x-inputs.text-array label="Danh sách link YouTube" name="link_youtubes" :value="old('link_youtubes', $homePage->link_youtubes ?? [])"/>
            </div>
        </div>

        <div class="card-footer">
            <button type="submit" class="btn btn-primary">Lưu thay đổi</button>
        </div>
    </form>

    <div id="templates" style="display: none;">
        <div id="stat-item-template">
            <div class="stat-item">
                <h5>Mục thống kê #<span class="stat-item-index"></span></h5>
                <div class="form-group">
                    <label>Giá trị (Số)</label>
                    <input type="number" class="form-control" name="stats[__INDEX__][value]" placeholder="Enter Giá trị (Số)" required>
                </div>
                <div class="form-group">
                    <label>Mô tả</label>
                    <input type="text" class="form-control" name="stats[__INDEX__][description]" placeholder="Enter Mô tả" required>
                </div>
                <div class="form-group">
                    <label>Ảnh minh họa</label>
                    <div class="input-group">
                        <input readonly type="text" class="form-control ckfinder-input" name="stats[__INDEX__][images]" value="">
                        <span class="input-group-append">
                            <button type="button" class="btn btn-secondary ckfinder-popup-dynamic">Duyệt Ảnh</button>
                        </span>
                    </div>
                    <div class="mt-2">
                        <img src="" alt="Preview" style="max-width: 150px; display: none;">
                    </div>
                </div>
                <div class="mt-auto text-center pt-3">
                    <button type="button" class="btn btn-danger btn-sm remove-item">Xóa mục này</button>
                </div>
            </div>
        </div>

        <div id="fag-item-template">
            <div class="fag-item">
                <h5>Câu hỏi #<span class="fag-item-index"></span></h5>
                <div class="form-group">
                    <label>Câu hỏi</label>
                    <input type="text" class="form-control" name="fags[__INDEX__][question]" placeholder="Enter Câu hỏi" required>
                </div>
                <div class="form-group">
                    <label>Câu trả lời</label>
                    <textarea class="form-control" name="fags[__INDEX__][answer]" required rows="3" placeholder="Enter Câu trả lời"></textarea>
                </div>
                <div class="mt-auto text-center pt-3">
                    <button type="button" class="btn btn-danger btn-sm remove-item">Xóa câu hỏi này</button>
                </div>
            </div>
        </div>
    </div>
@endsection

@push('scripts')
<script>
document.addEventListener("DOMContentLoaded", function() {

    function setupDynamicAdder(addButtonId, containerId, templateId, itemClass) {
        const addButton = document.getElementById(addButtonId);
        const container = document.getElementById(containerId);
        
        addButton.addEventListener('click', function() {
            const newIndex = container.querySelectorAll(`.${itemClass}`).length;
            const template = document.getElementById(templateId).innerHTML;
            const newItemHtml = template.replace(/__INDEX__/g, newIndex);
            
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = newItemHtml;
            const newItem = tempDiv.firstElementChild;

            newItem.querySelector(`.${itemClass}-index`).textContent = newIndex + 1;
            container.appendChild(newItem);

            const ckfinderButton = newItem.querySelector('.ckfinder-popup-dynamic');
            if (ckfinderButton) {
                setupCkFinderForButton(ckfinderButton);
            }
        });
    }

    function setupDynamicRemover(containerId, itemClass) {
        const container = document.getElementById(containerId);
        container.addEventListener('click', function(e) {
            if (e.target && e.target.matches('.remove-item')) {
                e.target.closest(`.${itemClass}`).remove();
                reindexItems(container, itemClass);
            }
        });
    }

    function reindexItems(container, itemClass) {
        const items = container.querySelectorAll(`.${itemClass}`);
        items.forEach((item, index) => {
            item.querySelector(`.${itemClass}-index`).textContent = index + 1;
            
            item.querySelectorAll('input, textarea').forEach(input => {
                const name = input.getAttribute('name');
                if (name) {
                    input.setAttribute('name', name.replace(/\[\d+\]/, `[${index}]`));
                }
            });
        });
    }

    function setupCkFinderForButton(button) {
        button.addEventListener('click', function() {
            CKFinder.popup({
                chooseFiles: true,
                onInit: function(finder) {
                    finder.on('files:choose', function(evt) {
                        const file = evt.data.files.first();
                        const path = new URL(file.getUrl()).pathname;
                        
                        const inputGroup = button.closest('.input-group');
                        const input = inputGroup.querySelector('.ckfinder-input');
                        const previewImg = inputGroup.closest('.form-group').querySelector('img');

                        if(input) input.value = path;
                        if (previewImg) {
                            previewImg.src = path;
                            previewImg.style.display = 'block';
                        }
                    });
                }
            });
        });
    }

    setupDynamicAdder('add-stat-item', 'stats-container', 'stat-item-template', 'stat-item');
    setupDynamicRemover('stats-container', 'stat-item');

    setupDynamicAdder('add-fag-item', 'fags-container', 'fag-item-template', 'fag-item');
    setupDynamicRemover('fags-container', 'fag-item');

    document.querySelectorAll('.ckfinder-popup-dynamic').forEach(setupCkFinderForButton);
});
</script>
@endpush

/* ===== views\kingexpressbus\admin\modules\dashboard\index.blade.php ===== */
@extends("kingexpressbus.admin.layouts.main")
@section("title","Dashboard")
@section("content")
    <div class="card">
        <div class="card-header">
            <h3 class="card-title">Form Element</h3>
        </div>
        <div class="card-body">
            <form action="" method="post">
                <div class="alert alert-primary">Đây là các input component có thể sử dụng trong form</div>
                @csrf
                <x-inputs.text label="Input Text" name="text"></x-inputs.text>
                <x-inputs.email label="Input Email" name="email"></x-inputs.email>
                <x-inputs.number label="Input Number" name="number"></x-inputs.number>
                <x-inputs.text-area label="Input Text Area" name="text-area"></x-inputs.text-area>
                <x-inputs.select label="Input Select 2" name="select-2">
                    <option value="1" @selected(true)>Option 1</option>
                    <option value="2">Option 2</option>
                    <option value="3">Option 3</option>
                    <option value="4">Option 4</option>
                    <option value="5">Option 5</option>
                </x-inputs.select>
                <x-inputs.select-multiple label="Input Select Multiple" name="select-multiple">
                    <option value="1" selected>Option 1</option>
                    <option value="2">Option 2</option>
                    <option value="3" selected>Option 3</option>
                    <option value="4">Option 4</option>
                    <option value="5">Option 5</option>
                </x-inputs.select-multiple>
                <x-inputs.date label="Input Date" name="date"></x-inputs.date>
                <x-inputs.time label="Input Time" name="time"></x-inputs.time>
                <x-inputs.editor label="Input Editor" name="editor"></x-inputs.editor>
                <!-- Input Image Link trả về đường dẫn của hình ảnh được lưu trong ckfinder -->
                <x-inputs.image-link label="Input Image Link" name="image"></x-inputs.image-link>

                <div class="alert alert-primary">Các phần tử nâng cao</div>
                <x-inputs.text-array label="Text Array" name="text_array"></x-inputs.text-array>
                <x-inputs.image-link-array label="Image Link Array" name="image_link_array"></x-inputs.image-link-array>
                <x-inputs.editor-array label="Editor Array" name="editor_array"></x-inputs.editor-array>
                <x-inputs.text-area-array label="Text Area Array" name="text_area_array"></x-inputs.text-area-array>

                <button type="submit" class="btn btn-primary">Submit</button>
            </form>
        </div>
    </div>
@endsection


/* ===== views\kingexpressbus\admin\modules\news\createOrEdit.blade.php ===== */
@php
    $isEdit = !empty($news?->id);
@endphp

@extends('kingexpressbus.admin.layouts.main')
@section('title', $isEdit ? 'Sửa Tin tức' : 'Tạo Tin tức')

@section('content')
    <div class="card card-primary">
        <div class="card-header">
            <h3 class="card-title">{{ $isEdit ? 'Sửa Tin tức: ' . $news->title : 'Tạo mới Tin tức' }}</h3>
        </div>
        <form
            action="{{ $isEdit ? route('admin.news.update', ['news' => $news->id]) : route('admin.news.store') }}"
            method="post">
            @csrf
            @if($isEdit)
                @method('PUT')
            @endif

            <div class="card-body">
                @if ($errors->any())
                    <div class="alert alert-danger">
                        <strong>Có lỗi xảy ra!</strong> Vui lòng kiểm tra lại các trường dữ liệu.
                    </div>
                @endif

                <x-inputs.text label="Tiêu đề" name="title" :value="old('title', $news?->title)" required/>
                
                {{-- Cột 'slug' sẽ được tạo tự động từ Tiêu đề trong Controller. --}}

                <x-inputs.image-link label="Ảnh đại diện (Thumbnail)" name="thumbnail" :value="old('thumbnail', $news?->thumbnail)" required/>
                
                <div class="row">
                    <div class="col-md-6">
                        <x-inputs.text label="Tác giả" name="author" :value="old('author', $news?->author)" required/>
                    </div>
                    <div class="col-md-6">
                        {{-- Giả sử biến $categories được truyền từ Controller --}}
                        <x-inputs.select label="Danh mục" name="category_id" required>
                            <option value="">-- Chọn danh mục --</option>
                            @foreach($categories as $category)
                                <option value="{{ $category->id }}" @selected(old('category_id', $news?->category_id) == $category->id)>
                                    {{ $category->name }}
                                </option>
                            @endforeach
                        </x-inputs.select>
                    </div>
                </div>

                <x-inputs.editor label="Nội dung" name="content" :value="old('content', $news?->content)" required/>

            </div>
            <div class="card-footer">
                <button type="submit" class="btn btn-primary">{{ $isEdit ? 'Cập nhật' : 'Tạo mới' }}</button>
                <a href="{{ route('admin.news.index') }}" class="btn btn-secondary">Hủy</a>
            </div>
        </form>
    </div>
@endsection

/* ===== views\kingexpressbus\admin\modules\news\index.blade.php ===== */
@extends('kingexpressbus.admin.layouts.main')
@section('title', 'Danh sách Tin tức')

@section('content')
<div class="card">
    <div class="card-header">
        <h3 class="card-title">Quản lý Tin tức</h3>
    </div>
    <div class="card-body">
        @include('kingexpressbus.admin.partials.alerts')

        <a href="{{ route('admin.news.create') }}" class="btn btn-primary mb-3">
            <i class="fas fa-plus"></i> Tạo mới Tin tức
        </a>

        <table id="data-table-news" class="table table-bordered table-striped table-hover">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Tiêu đề</th>
                    <th>Ảnh đại diện</th>
                    <th>Danh mục</th>
                    <th>Tác giả</th>
                    <th>Lượt xem</th>
                    <th>Hành động</th>
                </tr>
            </thead>
            <tbody>
                @foreach($newsItems as $item)
                <tr>
                    <td>{{ $item->id }}</td>
                    <td>{{ $item->title }}</td>
                    <td>
                        @if($item->thumbnail)
                        <img src="{{ $item->thumbnail }}" alt="{{ $item->title }}"
                            style="max-width: 100px; max-height: 100px;">
                        @endif
                    </td>
                    <td>{{ $item->category_name ?? 'N/A' }}</td>
                    <td>{{ $item->author }}</td>
                    <td>{{ $item->view }}</td>
                    <td>
                        <a class="btn btn-warning btn-sm"
                            href="{{ route('admin.news.edit', ['news' => $item->id]) }}">
                            <i class="fas fa-edit"></i> Sửa
                        </a>
                        <form action="{{ route('admin.news.destroy', ['news' => $item->id]) }}"
                            method="POST" style="display: inline-block;">
                            @csrf
                            @method('DELETE')
                            <button type="submit" class="btn btn-danger btn-sm"
                                onclick="return confirm('Bạn có chắc muốn xóa Tin tức này?')">
                                <i class="fas fa-trash"></i> Xoá
                            </button>
                        </form>
                    </td>
                </tr>
                @endforeach
            </tbody>
        </table>
    </div>
</div>
@endsection

@push('scripts')
<script>
    $(document).ready(function() {
        $('#data-table-news').DataTable({
            "responsive": true,
            "lengthChange": false,
            "autoWidth": false,
            "buttons": ["copy", "csv", "excel", "pdf", "print", "colvis"],
            "language": {
                "url": "/admin/plugins/datatables/Vietnamese.json"
            },
            "order": [
                [0, "desc"]
            ]
        }).buttons().container().appendTo('#data-table-news_wrapper .col-md-6:eq(0)');
    });
</script>
@endpush

/* ===== views\kingexpressbus\admin\modules\teachers\createOrEdit.blade.php ===== */
@php
$isEdit = !empty($teacher?->id);
@endphp

@extends('kingexpressbus.admin.layouts.main')
@section('title', $isEdit ? 'Sửa thông tin Giáo viên' : 'Thêm mới Giáo viên')

@section('content')
<div class="card card-primary">
    <div class="card-header">
        <h3 class="card-title">{{ $isEdit ? 'Sửa thông tin: ' . $teacher->full_name : 'Thêm mới Giáo viên' }}</h3>
    </div>
    <form
        action="{{ $isEdit ? route('admin.teachers.update', ['teacher' => $teacher->id]) : route('admin.teachers.store') }}"
        method="post">
        @csrf
        @if($isEdit)
        @method('PUT')
        @endif

        <div class="card-body">
            @if ($errors->any())
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                <strong>Có lỗi xảy ra!</strong> Vui lòng kiểm tra lại các trường dữ liệu.
                <ul class="mb-0 mt-2">
                    @foreach ($errors->all() as $error)
                    <li>{{ $error }}</li>
                    @endforeach
                </ul>
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            @endif

            <div class="row">
                <div class="col-md-6">
                    <x-inputs.text label="Họ và tên" name="full_name" :value="old('full_name', $teacher?->full_name)" required />
                </div>
                <div class="col-md-6">
                    <x-inputs.text label="Quốc tịch" name="role" :value="old('role', $teacher?->role)" required />
                </div>
            </div>

            <x-inputs.image-link label="Ảnh đại diện (Avatar)" name="avatar" :value="old('avatar', $teacher?->avatar)" required />

            <div class="row">
                <div class="col-md-6">
                    <x-inputs.email label="Email" name="email" :value="old('email', $teacher?->email)" required />
                </div>
                <div class="col-md-6">
                    <x-inputs.text label="Link Facebook" name="facebook" :value="old('facebook', $teacher?->facebook)" required />
                </div>
            </div>

            <x-inputs.text-area label="Bằng cấp, Chứng chỉ (ngăn cách nhau bởi dấu ',' ví dụ: toeic, ielts)" name="qualifications" :value="old('qualifications', $teacher?->qualifications)" required />

            <x-inputs.editor label="Mô tả thêm về giáo viên (Tiểu sử, kinh nghiệm,...)" name="description" :value="old('description', $teacher?->description)" />

        </div>
        <div class="card-footer">
            <button type="submit" class="btn btn-primary">{{ $isEdit ? 'Cập nhật' : 'Thêm mới' }}</button>
            <a href="{{ route('admin.teachers.index') }}" class="btn btn-secondary">Hủy</a>
        </div>
    </form>
</div>
@endsection

/* ===== views\kingexpressbus\admin\modules\teachers\index.blade.php ===== */
@extends('kingexpressbus.admin.layouts.main')
@section('title', 'Danh sách Giáo viên')

@section('content')
    <div class="card">
        <div class="card-header">
            <h3 class="card-title">Quản lý Giáo viên</h3>
        </div>
        <div class="card-body">
            @include('kingexpressbus.admin.partials.alerts')

            <a href="{{ route('admin.teachers.create') }}" class="btn btn-primary mb-3">
                <i class="fas fa-plus"></i> Thêm mới Giáo viên
            </a>

            <table id="data-table-teachers" class="table table-bordered table-striped table-hover">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Ảnh đại diện</th>
                    <th>Họ và tên</th>
                    <th>Quốc tịch</th>
                    <th>Slug</th> {{-- <--- THÊM CỘT MỚI --}}
                    <th>Email</th>
                    <th>Hành động</th>
                </tr>
                </thead>
                <tbody>
                @foreach($teachers as $teacher)
                    <tr>
                        <td>{{ $teacher->id }}</td>
                        <td>
                             @if($teacher->avatar)
                                <img src="{{ $teacher->avatar }}" alt="{{ $teacher->full_name }}"
                                     style="width: 60px; height: 60px; border-radius: 50%; object-fit: cover;">
                            @endif
                        </td>
                        <td>{{ $teacher->full_name }}</td>
                        <td>{{ $teacher->role }}</td>
                        <td>{{ $teacher->slug }}</td> {{-- <--- THÊM DỮ LIỆU CỘT MỚI --}}
                        <td>{{ $teacher->email }}</td>
                        <td>
                            <a class="btn btn-warning btn-sm"
                               href="{{ route('admin.teachers.edit', ['teacher' => $teacher->id]) }}">
                                <i class="fas fa-edit"></i> Sửa
                            </a>
                            <form action="{{ route('admin.teachers.destroy', ['teacher' => $teacher->id]) }}"
                                  method="POST" style="display: inline-block;">
                                @csrf
                                @method('DELETE')
                                <button type="submit" class="btn btn-danger btn-sm"
                                        onclick="return confirm('Bạn có chắc muốn xóa Giáo viên này?')">
                                    <i class="fas fa-trash"></i> Xoá
                                </button>
                            </form>
                        </td>
                    </tr>
                @endforeach
                </tbody>
            </table>
        </div>
    </div>
@endsection

@push('scripts')
    <script>
        $(document).ready(function () {
            $('#data-table-teachers').DataTable({
                "responsive": true, "lengthChange": false, "autoWidth": false,
                "buttons": ["copy", "csv", "excel", "pdf", "print", "colvis"],
                "language": {"url": "/admin/plugins/datatables/Vietnamese.json"},
                "order": [[2, "asc"]] // Sắp xếp theo tên
            }).buttons().container().appendTo('#data-table-teachers_wrapper .col-md-6:eq(0)');
        });
    </script>
@endpush

/* ===== views\kingexpressbus\admin\modules\training\createOrEdit.blade.php ===== */
@php
$isEdit = !empty($training?->id);
@endphp

@extends('kingexpressbus.admin.layouts.main')
@section('title', $isEdit ? 'Sửa Khoá Đào tạo' : 'Tạo Khoá Đào tạo')

@section('content')
<div class="card card-primary">
    <div class="card-header">
        <h3 class="card-title">{{ $isEdit ? 'Sửa Khoá Đào tạo: ' . $training->title : 'Tạo mới Khoá Đào tạo' }}</h3>
    </div>
    <form
        action="{{ $isEdit ? route('admin.training.update', ['training' => $training->id]) : route('admin.training.store') }}"
        method="post">
        @csrf
        @if($isEdit)
        @method('PUT')
        @endif

        <div class="card-body">
            @if ($errors->any())
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                <strong>Có lỗi xảy ra!</strong> Vui lòng kiểm tra lại các trường dữ liệu.
                <ul class="mb-0 mt-2">
                    @foreach ($errors->all() as $error)
                    <li>{{ $error }}</li>
                    @endforeach
                </ul>
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            @endif

            <x-inputs.text label="Tiêu đề Khoá học" name="title" :value="old('title', $training?->title)" required />
            <x-inputs.image-link label="Ảnh đại diện (Thumbnail)" name="thumbnail" :value="old('thumbnail', $training?->thumbnail)" required />
            <x-inputs.editor label="Mô tả chung" name="description" :value="old('description', $training?->description)" required />

            <div class="row">
                <div class="col-md-4">
                    <x-inputs.text label="Độ tuổi" name="age" :value="old('age', $training?->age)" required />
                </div>
                <div class="col-md-4">
                    <x-inputs.text label="Thời lượng" name="duration" :value="old('duration', $training?->duration)" required />
                </div>
                <div class="col-md-4">
                    <x-inputs.text label="Phương pháp" name="method" :value="old('method', $training?->method)" required />
                </div>
            </div>

            <x-inputs.text-area label="Kết quả đầu ra" name="outcome" :value="old('outcome', $training?->outcome)" required rows="4" />

            <h5 class="mt-4 mb-3 text-primary border-bottom pb-2">Chi tiết chương trình học</h5>
            <x-inputs.text-area label="Kỹ năng Nói (Speaking)" name="speaking" :value="old('speaking', $training?->speaking)" required />
            <x-inputs.text-area label="Kỹ năng Nghe (Listening)" name="listening" :value="old('listening', $training?->listening)" required />
            <x-inputs.text-area label="Kỹ năng Đọc (Reading)" name="reading" :value="old('reading', $training?->reading)" required />
            <x-inputs.text-area label="Kỹ năng Viết (Writing)" name="writing" :value="old('writing', $training?->writing)" required />

            <x-inputs.editor label="Giáo trình (Curriculum)" name="curriculum" :value="old('curriculum', $training?->curriculum)" />

        </div>
        <div class="card-footer">
            <button type="submit" class="btn btn-primary">{{ $isEdit ? 'Cập nhật' : 'Tạo mới' }}</button>
            <a href="{{ route('admin.training.index') }}" class="btn btn-secondary">Hủy</a>
        </div>
    </form>
</div>
@endsection

/* ===== views\kingexpressbus\admin\modules\training\index.blade.php ===== */
@extends('kingexpressbus.admin.layouts.main')
@section('title', 'Danh sách Khoá Đào tạo')

@section('content')
<div class="card">
    <div class="card-header">
        <h3 class="card-title">Quản lý Khoá Đào tạo</h3>
    </div>
    <div class="card-body">
        {{-- Include file hiển thị thông báo (thành công, lỗi) --}}
        @include('kingexpressbus.admin.partials.alerts')

        {{-- Nút để điều hướng đến trang tạo mới --}}
        <a href="{{ route('admin.training.create') }}" class="btn btn-primary mb-3">
            <i class="fas fa-plus"></i> Tạo mới Khoá Đào tạo
        </a>

        {{-- Bảng hiển thị dữ liệu --}}
        <table id="data-table-training" class="table table-bordered table-striped table-hover">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Tiêu đề</th>
                    <th>Ảnh đại diện</th>
                    <th>Lứa tuổi</th>
                    <th>Thời lượng</th>
                    <th>Hành động</th>
                </tr>
            </thead>
            <tbody>
                {{-- Vòng lặp để duyệt qua biến $trainings được truyền từ Controller --}}
                @foreach($trainings as $training)
                <tr>
                    <td>{{ $training->id }}</td>
                    <td>{{ $training->title }}</td>
                    <td>
                        @if($training->thumbnail)
                        <img src="{{ $training->thumbnail }}" alt="{{ $training->title }}"
                            style="max-width: 100px; max-height: 100px;">
                        @else
                        N/A
                        @endif
                    </td>
                    <td>{{ $training->age }}</td>
                    <td>{{ $training->duration }}</td>
                    <td>
                        {{-- Nút Sửa --}}
                        <a class="btn btn-warning btn-sm"
                            href="{{ route('admin.training.edit', ['training' => $training->id]) }}">
                            <i class="fas fa-edit"></i> Sửa
                        </a>

                        {{-- Nút Xóa được đặt trong một form --}}
                        <form action="{{ route('admin.training.destroy', ['training' => $training->id]) }}"
                            method="POST" style="display: inline-block;">
                            @csrf
                            @method('DELETE')
                            <button type="submit" class="btn btn-danger btn-sm"
                                onclick="return confirm('Bạn có chắc chắn muốn xóa Khoá Đào tạo này? Hành động này không thể hoàn tác.')">
                                <i class="fas fa-trash"></i> Xoá
                            </button>
                        </form>
                    </td>
                </tr>
                @endforeach
            </tbody>
        </table>
    </div>
</div>
@endsection

@push('scripts')
{{-- Script để khởi tạo DataTable, giúp bảng có thêm tính năng tìm kiếm, sắp xếp, phân trang phía client --}}
<script>
    $(document).ready(function() {
        $('#data-table-training').DataTable({
            "responsive": true,
            "lengthChange": false,
            "autoWidth": false,
            "buttons": ["copy", "csv", "excel", "pdf", "print", "colvis"],
            "language": {
                "url": "/admin/plugins/datatables/Vietnamese.json" // Sử dụng file ngôn ngữ Tiếng Việt cho DataTable
            },
            "order": [
                [0, "desc"]
            ] // Sắp xếp mặc định theo ID giảm dần
        }).buttons().container().appendTo('#data-table-training_wrapper .col-md-6:eq(0)');
    });
</script>
@endpush

/* ===== views\kingexpressbus\admin\partials\alerts.blade.php ===== */
{{-- Hiển thị thông báo thành công --}}
@if (session('success'))
    <div class="alert alert-success alert-dismissible fade show" role="alert">
        {{ session('success') }}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
@endif

{{-- Hiển thị thông báo lỗi --}}
@if (session('error'))
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        {{ session('error') }}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
@endif

{{-- Hiển thị thông báo cảnh báo --}}
@if (session('warning'))
    <div class="alert alert-warning alert-dismissible fade show" role="alert">
        {{ session('warning') }}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
@endif

{{-- Hiển thị thông báo thông tin --}}
@if (session('info'))
    <div class="alert alert-info alert-dismissible fade show" role="alert">
        {{ session('info') }}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
@endif

{{-- Bạn cũng có thể thêm phần hiển thị lỗi validation chung ở đây nếu muốn,
   mặc dù trong form createOrEdit bạn đã có phần hiển thị lỗi chi tiết rồi --}}
{{--
@if ($errors->any() && !request()->is('*/create') && !request()->is('*/edit'))
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        <strong>Có lỗi xảy ra!</strong> Đã xảy ra lỗi trong quá trình xử lý.
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
@endif
--}}


/* ===== views\kingexpressbus\auth\login.blade.php ===== */
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{config("app.name")}} - Admin</title>
    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="{{asset('/admin/plugins/fontawesome-free/css/all.min.css')}}">
    <!-- icheck bootstrap -->
    <link rel="stylesheet" href="{{asset('/admin/plugins/icheck-bootstrap/icheck-bootstrap.min.css')}}">
    <!-- Theme style -->
    <link rel="stylesheet" href="{{asset('/admin/dist/css/adminlte.min.css')}}">
</head>
<body class="hold-transition login-page">
<div class="login-box">
    <div class="login-logo">
        <a href="#"><b> {{config("app.name")}} </b>ADMIN</a>
    </div>
    <!-- /.login-logo -->
    <div class="card">
        <div class="card-body login-card-body">
            <form action="{{route('admin.authenticate')}}" method="post">
                @session('error')
                <div class="alert alert-danger">
                    Đăng nhập thất bại
                </div>
                @endsession
                @csrf
                <div class="input-group mb-3">
                    <input type="email" name="email" class="form-control" placeholder="Email" required>
                    <div class="input-group-append">
                        <div class="input-group-text">
                            <span class="fas fa-envelope"></span>
                        </div>
                    </div>
                </div>
                <div class="input-group mb-3">
                    <input type="password" name="password" class="form-control" placeholder="Password" required>
                    <div class="input-group-append">
                        <div class="input-group-text">
                            <span class="fas fa-lock"></span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-8">
                        <div class="icheck-primary">
                            <input type="checkbox" id="remember" name="remember">
                            <label for="remember">
                                Nhớ trình duyệt
                            </label>
                        </div>
                    </div>
                    <div class="col-4">
                        <button type="submit" class="btn btn-primary btn-block text-nowrap">Đăng nhập</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- jQuery -->
<script src="{{asset("/admin/plugins/jquery/jquery.min.js")}}"></script>
<!-- Bootstrap 4 -->
<script src="{{asset('/admin/plugins/bootstrap/js/bootstrap.bundle.min.js')}}"></script>
<!-- AdminLTE App -->
<script src="{{asset('/admin/dist/js/adminlte.min.js')}}"></script>

</body>
</html>


/* ===== views\kingexpressbus\mail\admin_new_customer_notification.blade.php ===== */
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Thông báo khách hàng mới</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', Arial, sans-serif;
            line-height: 1.6;
            background: #f8fafc;
            min-height: 100vh;
            padding: 20px;
        }
        
        .email-container {
            max-width: 600px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .header {
            background: linear-gradient(135deg, #fb923c 0%, #f97316 100%);
            padding: 40px 30px;
            text-align: center;
            position: relative;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="50" cy="50" r="0.5" fill="rgba(255,255,255,0.05)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.3;
        }
        
        .header h2 {
            color: white;
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }
        
        .company-name {
            color: rgba(255, 255, 255, 0.9);
            font-size: 16px;
            font-weight: 500;
            position: relative;
            z-index: 1;
            margin-top: 10px;
        }
        
        .notification-badge {
            display: inline-block;
            background: rgba(255, 255, 255, 0.95);
            color: #ea580c;
            padding: 8px 20px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
            border: 2px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .content {
            padding: 40px 30px;
        }
        
        .intro-text {
            font-size: 16px;
            color: #64748b;
            margin-bottom: 30px;
            text-align: center;
            line-height: 1.7;
        }
        
        .section-title {
            font-size: 20px;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-title::before {
            content: '📋';
            font-size: 22px;
        }
        
        .info-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .info-table th {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            color: #334155;
            text-align: left;
            padding: 16px 20px;
            font-weight: 600;
            font-size: 14px;
            border-bottom: 1px solid #e2e8f0;
            width: 40%;
            position: relative;
        }
        
        .info-table th::after {
            content: '';
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 3px;
            height: 20px;
            background: linear-gradient(135deg, #fb923c 0%, #f97316 100%);
            border-radius: 2px;
        }
        
        .info-table td {
            padding: 16px 20px;
            color: #475569;
            background: white;
            border-bottom: 1px solid #f1f5f9;
            font-size: 15px;
            line-height: 1.6;
        }
        
        .info-table tr:hover {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            transform: translateY(-1px);
            transition: all 0.3s ease;
        }
        
        .info-table tr:last-child th,
        .info-table tr:last-child td {
            border-bottom: none;
        }
        
        .footer {
            background: #f8fafc;
            padding: 30px;
            text-align: center;
            border-top: 1px solid #e2e8f0;
        }
        
        .footer-text {
            color: #64748b;
            font-size: 14px;
            margin-bottom: 15px;
        }
        
        .action-button {
            display: inline-block;
            background: linear-gradient(135deg, #fb923c 0%, #f97316 100%);
            color: white;
            padding: 12px 30px;
            text-decoration: none;
            border-radius: 25px;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(251, 146, 60, 0.3);
        }
        
        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(251, 146, 60, 0.4);
        }
        
        .highlight-value {
            font-weight: 600;
            color: #1e293b;
        }
        
        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            
            .email-container {
                border-radius: 15px;
            }
            
            .header {
                padding: 30px 20px;
            }
            
            .header h2 {
                font-size: 24px;
            }
            
            .content {
                padding: 30px 20px;
            }
            
            .info-table th,
            .info-table td {
                padding: 12px 15px;
                font-size: 14px;
            }
            
            .section-title {
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <div class="email-container">
        <div class="header">
            <div class="notification-badge">🔔 Thông báo mới</div>
            <h2>Có khách hàng mới đăng ký tư vấn</h2>
            <div class="company-name">📚 A&U Center English</div>
        </div>
        
        <div class="content">
            <p class="intro-text">
                Một khách hàng mới vừa gửi thông tin đăng ký tư vấn qua website. 
                Vui lòng kiểm tra thông tin chi tiết bên dưới và liên hệ sớm nhất có thể.
            </p>
            
            <h3 class="section-title">Chi tiết thông tin:</h3>
            
            <table class="info-table">
                <tr>
                    <th>👤 Tên phụ huynh</th>
                    <td class="highlight-value">{{ $customerData['full_name_parent'] }}</td>
                </tr>
                <tr>
                    <th>📱 Số điện thoại</th>
                    <td class="highlight-value">{{ $customerData['phone'] }}</td>
                </tr>
                <tr>
                    <th>📧 Email</th>
                    <td class="highlight-value">{{ $customerData['email'] }}</td>
                </tr>
                <tr>
                    <th>👶 Tên học viên</th>
                    <td class="highlight-value">{{ $customerData['full_name_children'] }}</td>
                </tr>
                <tr>
                    <th>🎂 Ngày sinh</th>
                    <td>{{ \Carbon\Carbon::parse($customerData['date_of_birth'])->format('d/m/Y') }}</td>
                </tr>
                <tr>
                    <th>📍 Địa chỉ</th>
                    <td>{{ $customerData['address'] }}</td>
                </tr>
                <tr>
                    <th>📚 Khóa học quan tâm</th>
                    <td>{{ $customerData['training_title'] ?? 'Chưa chọn' }}</td>
                </tr>
                <tr>
                    <th>📝 Ghi chú</th>
                    <td>{{ $customerData['note'] ?? 'Không có' }}</td>
                </tr>
            </table>
        </div>
        
        <div class="footer">
            <p class="footer-text">
                📞 Hãy liên hệ với khách hàng trong thời gian sớm nhất để có thể hỗ trợ tốt nhất.
            </p>
            <a href="#" class="action-button">Xem chi tiết trong hệ thống</a>
        </div>
    </div>
</body>
</html>

/* ===== views\kingexpressbus\mail\customer_registration_success.blade.php ===== */
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Xác nhận đăng ký</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', Arial, sans-serif;
            line-height: 1.6;
            background: #f8fafc;
            min-height: 100vh;
            padding: 20px;
        }
        
        .email-container {
            max-width: 600px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .header {
            background: linear-gradient(135deg, #fb923c 0%, #f97316 100%);
            padding: 40px 30px;
            text-align: center;
            position: relative;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="50" cy="50" r="0.5" fill="rgba(255,255,255,0.05)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.3;
        }
        
        .success-badge {
            display: inline-block;
            background: rgba(255, 255, 255, 0.95);
            color: #16a34a;
            padding: 8px 20px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
            border: 2px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .header h2 {
            color: white;
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }
        
        .company-name {
            color: rgba(255, 255, 255, 0.9);
            font-size: 16px;
            font-weight: 500;
            position: relative;
            z-index: 1;
            margin-top: 10px;
        }
        
        .content {
            padding: 40px 30px;
        }
        
        .greeting {
            font-size: 18px;
            color: #1e293b;
            margin-bottom: 25px;
            font-weight: 600;
        }
        
        .content-text {
            font-size: 16px;
            color: #475569;
            margin-bottom: 20px;
            line-height: 1.7;
        }
        
        .highlight-name {
            color: #f97316;
            font-weight: 600;
        }
        
        .info-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-left: 4px solid #fb923c;
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            box-shadow: 0 2px 8px rgba(251, 146, 60, 0.1);
        }
        
        .info-box-title {
            font-size: 16px;
            font-weight: 600;
            color: #92400e;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .info-box-text {
            font-size: 15px;
            color: #a16207;
            line-height: 1.6;
        }
        
        .contact-section {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            padding: 25px;
            border-radius: 15px;
            margin: 30px 0;
            border: 1px solid #e2e8f0;
        }
        
        .contact-title {
            font-size: 18px;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .contact-item {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
            font-size: 15px;
        }
        
        .contact-item:last-child {
            margin-bottom: 0;
        }
        
        .contact-icon {
            width: 20px;
            text-align: center;
            font-size: 16px;
        }
        
        .contact-link {
            color: #f97316;
            font-weight: 600;
            text-decoration: none;
        }
        
        .contact-link:hover {
            text-decoration: underline;
        }
        
        .footer {
            background: linear-gradient(135deg, #fb923c 0%, #f97316 100%);
            padding: 30px;
            text-align: center;
            color: white;
        }
        
        .signature {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 10px;
        }
        
        .company-footer {
            font-size: 18px;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .divider {
            height: 3px;
            background: linear-gradient(135deg, #fb923c 0%, #f97316 100%);
            border-radius: 2px;
            margin: 30px 0;
            opacity: 0.3;
        }
        
        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            
            .email-container {
                border-radius: 15px;
            }
            
            .header {
                padding: 30px 20px;
            }
            
            .header h2 {
                font-size: 24px;
            }
            
            .content {
                padding: 30px 20px;
            }
            
            .contact-section {
                padding: 20px;
            }
            
            .greeting {
                font-size: 16px;
            }
            
            .content-text {
                font-size: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="email-container">
        <div class="header">
            <div class="success-badge">✅ Đăng ký thành công</div>
            <h2>Cảm ơn bạn đã đăng ký tư vấn!</h2>
            <div class="company-name">📚 A&U Center English</div>
        </div>
        
        <div class="content">
            <div class="greeting">
                Kính gửi Quý phụ huynh <span class="highlight-name">{{ $customerData['full_name_parent'] }}</span>,
            </div>
            
            <p class="content-text">
                Chúng tôi đã nhận được thông tin đăng ký tư vấn của bạn cho học viên 
                <span class="highlight-name">{{ $customerData['full_name_children'] }}</span>.
            </p>
            
            <div class="info-box">
                <div class="info-box-title">
                    🎯 Thông tin tiếp theo
                </div>
                <div class="info-box-text">
                    A&U English Center sẽ liên hệ với bạn trong thời gian sớm nhất để xác nhận và tư vấn chi tiết hơn về khóa học phù hợp nhất cho con bạn.
                </div>
            </div>
            
            <div class="divider"></div>
            
            <div class="contact-section">
                <div class="contact-title">
                    📞 Thông tin liên hệ
                </div>
                <div class="contact-item">
                    <span class="contact-icon">📱</span>
                    <span>Hotline: <a href="tel:[Số điện thoại của trung tâm]" class="contact-link">[Số điện thoại của trung tâm]</a></span>
                </div>
                <div class="contact-item">
                    <span class="contact-icon">📧</span>
                    <span>Email: <a href="mailto:[Email của trung tâm]" class="contact-link">[Email của trung tâm]</a></span>
                </div>
                <div class="contact-item">
                    <span class="contact-icon">⏰</span>
                    <span>Thời gian làm việc: Thứ 2 - Chủ nhật (8:00 - 20:00)</span>
                </div>
            </div>
            
            <p class="content-text">
                Cảm ơn bạn đã tin tưởng và lựa chọn A&U English Center. Chúng tôi cam kết mang đến chương trình học tốt nhất cho con bạn!
            </p>
        </div>
        
        <div class="footer">
            <div class="signature">Trân trọng,</div>
            <div class="company-footer">
                📚 A&U English Center
            </div>
        </div>
    </div>
</body>
</html>


/* ===== IGNORED FILES & DIRECTORIES ===== */
/* The following items were excluded based on ignore rules */

/* Ignored items list: */
/* Ignored directories: */
/*   .codebase/ */
/*   views\vendor\ckfinder/ */
